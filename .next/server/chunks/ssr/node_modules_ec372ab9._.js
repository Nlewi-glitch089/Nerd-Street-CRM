module.exports=[50852,(a,b,c)=>{"use strict";function d(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(d=function(a){return a?c:b})(a)}c._=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=d(b);if(c&&c.has(a))return c.get(a);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,c&&c.set(a,e),e}},40175,(a,b,c)=>{"use strict";b.exports=a.r(1951).vendored.contexts.HeadManagerContext},42939,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"warnOnce",{enumerable:!0,get:function(){return d}});let d=a=>{}},20647,a=>{"use strict";var b=a.i(79168),c=a.i(27068),d=a.i(32759),e=a.i(39141),f=a.i(27342),g=a.i(8171),h=a.i(27669),i=a.i(41910);function j(){let[a,b]=(0,h.useState)("signin"),[c,d]=(0,h.useState)(!1),[e,f]=(0,h.useState)(null),[j,k]=(0,h.useState)(""),[l,m]=(0,h.useState)(""),[n,o]=(0,h.useState)(""),[p,q]=(0,h.useState)("TEAM_MEMBER"),[r,s]=(0,h.useState)(null),t=(0,i.useRouter)();async function u(a){if(a&&"function"==typeof a.preventDefault&&a.preventDefault(),f(null),!l||!n||!j)return void f({type:"error",text:"Please provide name, email and password."});let c=String(l||"").trim().toLowerCase(),e="@nerdstgamers.com";if(!c.endsWith(e)||!/^[a-z0-9._-]+$/.test(c.slice(0,-e.length)))return void f({type:"error",text:`Please use an email like name${e} (letters, numbers, dot, underscore or hyphen allowed).`});if(String(n).length<8)return void f({type:"error",text:"Password must be at least 8 characters."});d(!0);try{let a=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:j,email:c,password:n,role:"TEAM_MEMBER"})}),d=await a.json();if(!a.ok)throw Error(d?.error||"Signup failed");f({type:"success",text:"Account created. You can now sign in."}),b("signin"),k(""),o("")}catch(a){f({type:"error",text:a.message})}finally{d(!1)}}let v=(0,h.useRef)(null),w=(0,h.useRef)(null);return(0,h.useEffect)(()=>{let a=!0;return(async()=>{try{let b=(()=>{try{return localStorage.getItem("token")}catch(a){return null}})();if(!b)return;let c=await fetch("/api/protected",{headers:{Authorization:`Bearer ${b}`}});if(!c.ok){try{localStorage.removeItem("token")}catch(a){}return}let d=await c.json();if(a&&s(d.user||null),d?.user?.role==="ADMIN")try{t.push("/admin")}catch(a){}}catch(a){try{localStorage.removeItem("token")}catch(a){}}})(),()=>{a=!1}},[]),(0,g.jsx)("main",{className:"page",children:(0,g.jsxs)("div",{className:"card auth-card",children:[(0,g.jsx)("h1",{className:"title",children:"Nerd Street CRM"}),(0,g.jsx)("p",{className:"subtitle",children:"Secure donor management for small nonprofits"}),(0,g.jsxs)("div",{style:{display:"flex",gap:8,justifyContent:"center",marginBottom:12},children:[(0,g.jsx)("button",{className:`btn ${"signin"===a?"btn-primary":"btn-ghost"}`,onClick:function(){if("signin"!==a){b("signin"),f(null);return}w.current&&w.current.requestSubmit()},children:"Sign In"}),(0,g.jsx)("button",{className:`btn ${"signup"===a?"btn-primary":"btn-ghost"}`,onClick:function(){if("signup"!==a){b("signup"),f(null);return}v.current&&v.current.requestSubmit()},children:"Sign Up"})]}),r?(0,g.jsxs)("div",{style:{textAlign:"center"},children:[(0,g.jsxs)("p",{style:{marginBottom:12},children:["Welcome, ",(0,g.jsx)("strong",{children:r.name||r.email})]}),(0,g.jsx)("div",{className:"actions",children:(0,g.jsx)("button",{className:"btn btn-ghost",onClick:function(){try{localStorage.removeItem("token")}catch(a){}s(null),f({type:"success",text:"Signed out"}),m(""),o(""),b("signin")},children:"Sign out"})})]}):"signup"===a?(0,g.jsxs)("form",{ref:v,onSubmit:u,children:[(0,g.jsxs)("div",{className:"field",children:[(0,g.jsx)("label",{className:"label",children:"Full name"}),(0,g.jsx)("input",{className:"input",value:j,onChange:a=>k(a.target.value),placeholder:"John Doe",autoComplete:"name"})]}),(0,g.jsxs)("div",{className:"field",children:[(0,g.jsx)("label",{className:"label",children:"Email"}),(0,g.jsx)("input",{className:"input",value:l,onChange:a=>m(a.target.value),placeholder:"name@nerdstgamers.com",autoComplete:"email"})]}),(0,g.jsxs)("div",{className:"field",children:[(0,g.jsx)("label",{className:"label",children:"Password"}),(0,g.jsx)("input",{className:"input",value:n,onChange:a=>o(a.target.value),type:"password",placeholder:"••••••••",autoComplete:"new-password"})]}),(0,g.jsx)("div",{className:"actions",children:(0,g.jsx)("button",{className:"btn btn-primary",type:"submit",disabled:c,children:c?"Creating...":"Sign Up"})})]}):(0,g.jsxs)("form",{ref:w,onSubmit:function(a){(a&&"function"==typeof a.preventDefault&&a.preventDefault(),f(null),l&&n)?(d(!0),(async()=>{try{let a=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l,password:n})}),b=await a.json();if(!a.ok)throw Error(b?.error||"Login failed");let c=b.token;try{localStorage.setItem("token",c)}catch(a){}let d=await fetch("/api/protected",{headers:{Authorization:`Bearer ${c}`}}),e=await d.json();if(!d.ok)throw Error(e?.error||"Protected check failed");s(e.user||null);let g=e.user?.role||"TEAM_MEMBER",h="ADMIN"===g?"Admin":"Team member";f({type:"success",text:`Successfully signed in as ${h}. Loading ${h} dashboard...`});try{await new Promise(a=>setTimeout(a,3500))}catch(a){}"ADMIN"===g?await t.push("/admin"):await t.push("/team")}catch(a){f({type:"error",text:a.message})}finally{d(!1)}})()):f({type:"error",text:"Please provide email and password."})},children:[(0,g.jsxs)("div",{className:"field",children:[(0,g.jsx)("label",{className:"label",children:"Email"}),(0,g.jsx)("input",{className:"input",value:l,onChange:a=>m(a.target.value),placeholder:"name@nerdstgamers.com",autoComplete:"email"})]}),(0,g.jsxs)("div",{className:"field",children:[(0,g.jsx)("label",{className:"label",children:"Password"}),(0,g.jsx)("input",{className:"input",value:n,onChange:a=>o(a.target.value),type:"password",placeholder:"••••••••",autoComplete:"current-password"})]}),(0,g.jsx)("div",{className:"actions",children:(0,g.jsx)("button",{className:"btn btn-primary",type:"submit",disabled:c,children:c?"Signing in...":"Sign In"})})]}),e&&(0,g.jsx)("p",{style:{marginTop:12,textAlign:"center",color:"error"===e.type?"#ff8080":"success"===e.type?"var(--color-neon)":"var(--color-gray)"},children:e.text})]})})}a.s(["default",()=>j],13715);var k=a.i(13715),l=a.i(9193);let m=(0,d.hoist)(k,"default"),n=(0,d.hoist)(k,"getStaticProps"),o=(0,d.hoist)(k,"getStaticPaths"),p=(0,d.hoist)(k,"getServerSideProps"),q=(0,d.hoist)(k,"config"),r=(0,d.hoist)(k,"reportWebVitals"),s=(0,d.hoist)(k,"unstable_getStaticProps"),t=(0,d.hoist)(k,"unstable_getStaticPaths"),u=(0,d.hoist)(k,"unstable_getStaticParams"),v=(0,d.hoist)(k,"unstable_getServerProps"),w=(0,d.hoist)(k,"unstable_getServerSideProps"),x=new b.PagesRouteModule({definition:{kind:c.RouteKind.PAGES,page:"/index",pathname:"/",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:f.default,Document:e.default},userland:k}),y=(0,l.getHandler)({srcPage:"/index",config:q,userland:k,routeModule:x,getStaticPaths:o,getStaticProps:n,getServerSideProps:p});a.s(["config",0,q,"default",0,m,"getServerSideProps",0,p,"getStaticPaths",0,o,"getStaticProps",0,n,"handler",0,y,"reportWebVitals",0,r,"routeModule",0,x,"unstable_getServerProps",0,v,"unstable_getServerSideProps",0,w,"unstable_getStaticParams",0,u,"unstable_getStaticPaths",0,t,"unstable_getStaticProps",0,s],20647)}];

//# sourceMappingURL=node_modules_ec372ab9._.js.map