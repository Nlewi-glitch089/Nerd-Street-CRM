{"version":3,"sources":["../../../../pages/admin.js","../../../../node_modules/next/dist/esm/build/templates/pages.js"],"sourcesContent":["import { useEffect, useState } from 'react'\r\nimport { useRouter } from 'next/router'\r\n\r\nexport default function Admin() {\r\n  const router = useRouter()\r\n  const [loading, setLoading] = useState(true)\r\n  const [user, setUser] = useState(null)\r\n  const [error, setError] = useState(null)\r\n\r\n  // dashboard state\r\n  const [metrics, setMetrics] = useState([])\r\n  const [partners, setPartners] = useState([])\r\n  const [recentActivity, setRecentActivity] = useState([])\r\n  const [alerts, setAlerts] = useState([])\r\n  const [donors, setDonors] = useState([])\r\n  const [campaigns, setCampaigns] = useState([])\r\n  const [analytics, setAnalytics] = useState(null)\r\n\r\n  // missing UI state (added to prevent runtime ReferenceErrors)\r\n  const [tab, setTab] = useState('analytics')\r\n  const [usersList, setUsersList] = useState([])\r\n  const [userSearch, setUserSearch] = useState('')\r\n  const [analyticsData, setAnalyticsData] = useState(null)\r\n  const [signOutMessage, setSignOutMessage] = useState(null)\r\n  const [selectedDonor, setSelectedDonor] = useState(null)\r\n  const [campaignsList, setCampaignsList] = useState([])\r\n\r\n  // clear-confirm modal state\r\n  const [confirmOpen, setConfirmOpen] = useState(false)\r\n  const [confirmPassword, setConfirmPassword] = useState('')\r\n  const [confirmLoading, setConfirmLoading] = useState(false)\r\n  const [confirmError, setConfirmError] = useState(null)\r\n\r\n  // role-change confirmation modal state (require admin password)\r\n  const [roleChangeModalOpen, setRoleChangeModalOpen] = useState(false)\r\n  const [roleChangeTargetUser, setRoleChangeTargetUser] = useState(null)\r\n  const [roleChangeTargetRole, setRoleChangeTargetRole] = useState(null)\r\n  const [roleChangePassword, setRoleChangePassword] = useState('')\r\n  const [roleChangeLoading, setRoleChangeLoading] = useState(false)\r\n  const [roleChangeError, setRoleChangeError] = useState(null)\r\n\r\n  // campaign action confirmation modal (require admin password like Clear All Data)\r\n  const [campaignActionModalOpen, setCampaignActionModalOpen] = useState(false)\r\n  const [campaignActionCampaign, setCampaignActionCampaign] = useState(null)\r\n  const [campaignActionType, setCampaignActionType] = useState(null) // 'approve' | 'deactivate' | 'deny'\r\n  const [campaignActionPassword, setCampaignActionPassword] = useState('')\r\n  const [campaignActionLoading, setCampaignActionLoading] = useState(false)\r\n  const [campaignActionError, setCampaignActionError] = useState(null)\r\n  // manual delete modal state\r\n  const [manualDeleteModalOpen, setManualDeleteModalOpen] = useState(false)\r\n  const [manualDeleteCampaign, setManualDeleteCampaign] = useState(null)\r\n  const [manualDeletePassword, setManualDeletePassword] = useState('')\r\n  const [manualDeleteLoading, setManualDeleteLoading] = useState(false)\r\n  const [manualDeleteError, setManualDeleteError] = useState(null)\r\n\r\n  useEffect(() => {\r\n    let mounted = true\r\n    ;(async () => {\r\n      try {\r\n        const token = (() => { try { return localStorage.getItem('token') } catch (e) { return null } })()\r\n        if (!token) {\r\n          if (mounted) setError('Not authenticated')\r\n          return\r\n        }\r\n        const res = await fetch('/api/protected', { headers: { Authorization: `Bearer ${token}` } })\r\n        if (!res.ok) {\r\n          if (mounted) setError('Session invalid or expired')\r\n          try { localStorage.removeItem('token') } catch (e) {}\r\n          return\r\n        }\r\n        const data = await res.json()\r\n        if (!data?.user) {\r\n          if (mounted) setError('Unable to load user')\r\n          return\r\n        }\r\n        // require ADMIN role for this page\r\n        if (data.user.role !== 'ADMIN') {\r\n          if (mounted) setError('Unauthorized — admin access required')\r\n          return\r\n        }\r\n        if (mounted) setUser(data.user)\r\n        // after we set user, load admin datasets\r\n        if (mounted) {\r\n            loadUsers(data.user).catch(()=>{})\r\n          loadCampaigns().catch(()=>{})\r\n          loadAnalytics().catch(()=>{})\r\n        }\r\n      } catch (err) {\r\n        if (mounted) setError('Network error')\r\n      } finally {\r\n        if (mounted) setLoading(false)\r\n      }\r\n    })()\r\n    return () => { mounted = false }\r\n  }, [])\r\n\r\n          // sample seeder\r\n          async function seedSampleData() {\r\n            try {\r\n              const token = (() => { try { return localStorage.getItem('token') } catch (e) { return null } })()\r\n              const res = await fetch('/api/seed', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json', ...(token ? { Authorization: `Bearer ${token}` } : {}) }\r\n              })\r\n              if (!res.ok) {\r\n                console.warn('Seed API failed, falling back to local seed')\r\n                const local = localSeed()\r\n                return local\r\n              }\r\n              const data = await res.json()\r\n              setMetrics(data.metrics || [])\r\n              setPartners(data.partners || [])\r\n              setDonors(data.donors || [])\r\n              setCampaigns(data.campaigns || [])\r\n              setRecentActivity(data.recentActivity || [])\r\n              setAlerts(data.alerts || [])\r\n              setAnalytics(data.analytics || null)\r\n              return data\r\n            } catch (err) {\r\n              console.warn('Seed failed', err)\r\n              const local = localSeed()\r\n              return local\r\n            }\r\n          }\r\n\r\n          function localSeed() {\r\n            setMetrics([\r\n              { title: 'Active Programs', value: '1', sub: 'Running programs' },\r\n              { title: 'Total Revenue', value: '$500,000', sub: 'From all programs' },\r\n              { title: 'Team Reminders', value: '0', sub: 'Action items pending' }\r\n            ])\r\n\r\n            setPartners([\r\n              { name: 'GameStop', tag: 'At Risk', health: '45%' },\r\n              { name: 'Discord', tag: 'Pending', health: '70%' },\r\n              { name: 'Alienware', tag: 'Active', health: '85%' },\r\n              { name: 'Red Bull Gaming', tag: 'Active', health: '92%' }\r\n            ])\r\n\r\n            setDonors([\r\n              { name: 'Nate Marshall', totalGiving: '$12,500', lastGift: 'Mar 3, 2025' },\r\n              { name: 'Evelyn Hart', totalGiving: '$4,200', lastGift: 'Jan 12, 2025' }\r\n            ])\r\n\r\n            setCampaigns([\r\n              { title: 'Spring Fundraiser 2025', goal: '$75,000', raised: '$12,000' },\r\n              { title: 'Community Outreach Q2', goal: '$20,000', raised: '$5,000' }\r\n            ])\r\n\r\n            setRecentActivity([\r\n              { title: 'Alienware', kind: 'Email', note: 'Equipment delivery confirmed for new venue opening.', date: 'Dec 7, 2025' },\r\n              { title: 'Red Bull Gaming', kind: 'Meeting', note: 'Discussed Q1 2025 tournament schedule and activation opportunities.', date: 'Dec 4, 2025' }\r\n            ])\r\n\r\n            setAlerts([\r\n              { title: 'Alienware', note: 'Send co-marketing proposal and content calendar — Due: Dec 14, 2025' },\r\n              { title: 'Red Bull Gaming', note: 'Reach out to discuss 2025 renewal terms — Due: Dec 19, 2025' }\r\n            ])\r\n\r\n            setAnalytics({ visitors: 1234, conversions: 42, revenue: 500000 })\r\n\r\n            return {\r\n              metrics: [\r\n                { title: 'Active Programs', value: '1', sub: 'Running programs' },\r\n                { title: 'Total Revenue', value: '$500,000', sub: 'From all programs' },\r\n                { title: 'Team Reminders', value: '0', sub: 'Action items pending' }\r\n              ],\r\n              partners: [\r\n                { name: 'GameStop', tag: 'At Risk', health: '45%' },\r\n                { name: 'Discord', tag: 'Pending', health: '70%' },\r\n                { name: 'Alienware', tag: 'Active', health: '85%' },\r\n                { name: 'Red Bull Gaming', tag: 'Active', health: '92%' }\r\n              ],\r\n              donors: [\r\n                { name: 'Nate Marshall', totalGiving: '$12,500', lastGift: 'Mar 3, 2025' },\r\n                { name: 'Evelyn Hart', totalGiving: '$4,200', lastGift: 'Jan 12, 2025' }\r\n              ],\r\n              campaigns: [\r\n                { title: 'Spring Fundraiser 2025', goal: '$75,000', raised: '$12,000' },\r\n                { title: 'Community Outreach Q2', goal: '$20,000', raised: '$5,000' }\r\n              ],\r\n              recentActivity: [\r\n                { title: 'Alienware', kind: 'Email', note: 'Equipment delivery confirmed for new venue opening.', date: 'Dec 7, 2025' },\r\n                { title: 'Red Bull Gaming', kind: 'Meeting', note: 'Discussed Q1 2025 tournament schedule and activation opportunities.', date: 'Dec 4, 2025' }\r\n              ],\r\n              alerts: [\r\n                { title: 'Alienware', note: 'Send co-marketing proposal and content calendar — Due: Dec 14, 2025' },\r\n                { title: 'Red Bull Gaming', note: 'Reach out to discuss 2025 renewal terms — Due: Dec 19, 2025' }\r\n              ],\r\n              analytics: { visitors: 1234, conversions: 42, revenue: 500000 }\r\n            }\r\n          }\r\n\r\n          // fetch helpers\r\n          async function loadUsers(currentUser) {\r\n            try {\r\n              const res = await fetch('/api/users')\r\n              const data = await res.json()\r\n\r\n              // If analytics data is empty, attempt a seed and prefer seeded analytics\r\n              let finalData = data\r\n              const hasNoData = !data || ((data.totalRevenue === 0 || data.totalRevenue == null) && (data.totalDonors === 0 || data.totalDonors == null) && (!Array.isArray(data.campaignStats) || data.campaignStats.length === 0))\r\n              if (hasNoData) {\r\n                try {\r\n                  const seeded = await seedSampleData()\r\n                  if (seeded) finalData = seeded.analytics || seeded\r\n                } catch (e) {\r\n                  console.warn('Auto-seed failed', e)\r\n                }\r\n              }\r\n\r\n              setAnalyticsData(finalData)\r\n              // populate usersList from the API if provided\r\n              let users = []\r\n              if (Array.isArray(data)) users = data\r\n              else if (Array.isArray(data?.users)) users = data.users\r\n              else if (Array.isArray(finalData?.users)) users = finalData.users\r\n              // if still empty, include the currently-signed-in admin user so management UI isn't blank\r\n              if (!users || users.length === 0) {\r\n                 try { if (currentUser) users = [currentUser]; else if (user) users = [user] } catch (e) { users = [] }\r\n              }\r\n              setUsersList(users || [])\r\n            } catch (e) {\r\n              console.warn('loadUsers failed', e)\r\n            }\r\n          }\r\n\r\n          async function loadCampaigns(){\r\n            try{\r\n              const res = await fetch('/api/campaigns')\r\n              if (!res.ok) return\r\n              const data = await res.json()\r\n              // If there are no campaigns returned, attempt to seed sample data\r\n              if (!data || !Array.isArray(data.campaigns) || data.campaigns.length === 0) {\r\n                try {\r\n                  const seeded = await seedSampleData()\r\n                  if (seeded && Array.isArray(seeded.campaigns)) {\r\n                    setCampaigns(seeded.campaigns)\r\n                    setCampaignsList(seeded.campaigns)\r\n                    // seeded also populates donors and analytics via seedSampleData\r\n                    return\r\n                  }\r\n                } catch (e) {\r\n                  console.warn('Auto-seed for campaigns failed', e)\r\n                }\r\n              }\r\n              setCampaigns(data.campaigns || [])\r\n              setCampaignsList(data.campaigns || [])\r\n            }catch(e){ console.warn(e) }\r\n          }\r\n\r\n          async function loadAnalytics(){\r\n            try{\r\n              const res = await fetch('/api/analytics')\r\n              if (!res.ok) return\r\n              const data = await res.json()\r\n              // If analytics response is empty or missing expected arrays, try seeding\r\n              const missing = !data || ((data.totalRevenue === 0 || data.totalRevenue == null) && (!Array.isArray(data.campaignStats) || data.campaignStats.length === 0))\r\n              if (missing) {\r\n                try {\r\n                  const seeded = await seedSampleData()\r\n                  if (seeded) {\r\n                    setAnalyticsData(seeded.analytics || seeded)\r\n                    return\r\n                  }\r\n                } catch (e) {\r\n                  console.warn('Auto-seed for analytics failed', e)\r\n                }\r\n              }\r\n              // Try to enrich analytics campaignStats with donation-derived totals from /api/campaigns\r\n              try {\r\n                const campRes = await fetch('/api/campaigns')\r\n                if (campRes.ok) {\r\n                  const campData = await campRes.json()\r\n                  const apiCampaigns = Array.isArray(campData.campaigns) ? campData.campaigns : []\r\n                  if (Array.isArray(data.campaignStats) && data.campaignStats.length > 0 && apiCampaigns.length > 0) {\r\n                    const mapById = apiCampaigns.reduce((acc, c) => { if (c.id) acc[c.id] = c; acc[c.name] = acc[c.name] || c; return acc }, {})\r\n                    const merged = data.campaignStats.map(cs => {\r\n                      // prefer analytics values but fill in when missing or zero using API totals\r\n                      const found = (cs.id && mapById[cs.id]) || mapById[cs.name]\r\n                      if (!found) return cs\r\n                      const analyticsRaised = Number(cs.raised || 0)\r\n                      const apiRaised = Number(found.raised || found.raisedAmount || 0)\r\n                      const analyticsGifted = Number(cs.gifted || cs.giftedRaised || 0)\r\n                      const apiGifted = Number(found.giftedRaised || found.gifted || 0)\r\n                      // If analytics shows 0 but API shows funds, prefer API totals\r\n                      const finalRaised = (analyticsRaised && analyticsRaised > 0) ? analyticsRaised : apiRaised\r\n                      const finalGifted = (analyticsGifted && analyticsGifted > 0) ? analyticsGifted : apiGifted\r\n                      return { ...cs, raised: finalRaised, gifted: finalGifted }\r\n                    })\r\n                    data.campaignStats = merged\r\n                  }\r\n                }\r\n              } catch (e) {\r\n                console.warn('Failed to enrich analytics with /api/campaigns data', e)\r\n              }\r\n\r\n              setAnalyticsData(data || null)\r\n            }catch(e){ console.warn(e) }\r\n          }\r\n\r\n          // color helpers\r\n          const tagColor = (tag) => {\r\n            if (!tag) return '#999'\r\n            const t = String(tag).toLowerCase()\r\n            if (t.includes('risk')) return '#ff4d4d'\r\n            if (t.includes('pending')) return '#ffcc00'\r\n            if (t.includes('active')) return 'var(--color-neon, #39ff14)'\r\n            return '#999'\r\n          }\r\n\r\n          const healthColor = (percent) => {\r\n            const p = parseInt(String(percent || '').replace('%','') || '0', 10)\r\n            if (p >= 85) return 'var(--color-neon, #39ff14)'\r\n            if (p >= 60) return '#ffcc00'\r\n            return '#ff4d4d'\r\n          }\r\n\r\n          // sign-out handler: clear client state, show brief toast, then redirect to auth page\r\n          function handleSignOut() {\r\n            try { localStorage.removeItem('token') } catch (e) { console.warn('removeItem token failed', e) }\r\n            try { \r\n              // clear client-side state\r\n              setUser(null)\r\n              setAnalyticsData(null)\r\n              setCampaignsList([])\r\n              setUsersList([])\r\n              setMetrics([])\r\n              setPartners([])\r\n              setRecentActivity([])\r\n              setAlerts([])\r\n              setDonors([])\r\n              setCampaigns([])\r\n              setSeedResponseData && setSeedResponseData(null)\r\n              setSeedError && setSeedError(null)\r\n              setSeedLoading && setSeedLoading(false)\r\n            } catch (e) { console.warn('Error clearing client state', e) }\r\n            try {\r\n              console.log('Signing out: clearing client state and redirecting')\r\n              setSignOutMessage('Signed out')\r\n              // short delay so user can see the toast\r\n              setTimeout(() => {\r\n                setSignOutMessage(null)\r\n                try {\r\n                  router.replace('/')\r\n                } catch (e) {\r\n                  console.warn('router.replace failed during sign-out, falling back to location.href', e)\r\n                  try { window.location.href = '/' } catch (err) { console.warn('Fallback redirect failed', err) }\r\n                }\r\n              }, 800)\r\n            } catch (e) {\r\n              try { window.location.href = '/' } catch (err) { console.warn('Redirect failed', err) }\r\n            }\r\n          }\r\n\r\n          // seed persistence state + handler\r\n          const [seedLoading, setSeedLoading] = useState(false)\r\n          const [seedError, setSeedError] = useState(null)\r\n          const [seedModalOpen, setSeedModalOpen] = useState(false)\r\n          const [seedResponseData, setSeedResponseData] = useState(null)\r\n\r\n          // derive dashboard metrics from live analytics/campaigns/alerts; prefer `analyticsData` when available\r\n          const displayMetrics = (() => {\r\n            // prefer live analytics if present\r\n            if (analyticsData) {\r\n              const campaignSum = Array.isArray(analyticsData.campaignStats) ? analyticsData.campaignStats.reduce((s,c)=>s + (Number(c.raised||0)||0),0) : 0\r\n              const donorTotal = Array.isArray(analyticsData.donorStats) ? analyticsData.donorStats.reduce((s,d)=>s + (Number(d.totalGiving||0)||0),0) : 0\r\n              // Total revenue should not double-count: prefer donor total (total inflow) when available,\r\n              // otherwise fallback to campaign sums. Use the larger to be conservative.\r\n              const totalCombined = Math.max(donorTotal || 0, campaignSum || 0)\r\n              return [\r\n                { title: 'Campaign Revenue', value: '$' + (campaignSum.toLocaleString ? campaignSum.toLocaleString() : campaignSum), sub: 'From campaign allocations' },\r\n                { title: 'Donor Revenue', value: '$' + (donorTotal.toLocaleString ? donorTotal.toLocaleString() : donorTotal), sub: 'Gifts from donors' },\r\n                { title: 'Total Revenue', value: '$' + (totalCombined.toLocaleString ? totalCombined.toLocaleString() : totalCombined), sub: 'Unique total (no double-counting)' }\r\n              ]\r\n            }\r\n            // otherwise fall back to any provided metrics array\r\n            if (Array.isArray(metrics) && metrics.length > 0) return metrics\r\n            return metrics || []\r\n          })()\r\n\r\n          async function persistSeed() {\r\n            try {\r\n              setSeedError(null)\r\n              setSeedLoading(true)\r\n              const token = (() => { try { return localStorage.getItem('token') } catch (e) { return null } })()\r\n              const res = await fetch('/api/seed', { method: 'POST', headers: { 'Content-Type': 'application/json', ...(token?{ Authorization: `Bearer ${token}` }:{} ) } })\r\n              const data = await res.json().catch(()=>null)\r\n              if (!res.ok) {\r\n                const msg = data?.error || 'Seed failed'\r\n                const details = data?.details || data?.stack || null\r\n                setSeedError(msg + (details ? ` — ${details}` : ''))\r\n                console.error('Seed API failed response:', data)\r\n                alert(`Seed failed: ${msg}${details ? '\\n\\nDetails:\\n' + details : ''}`)\r\n                return\r\n              }\r\n              // refresh admin datasets using the current signed-in user\r\n              try { await Promise.all([loadUsers(user).catch(()=>{}), loadCampaigns().catch(()=>{}), loadAnalytics().catch(()=>{})]) } catch (e) { console.warn('Reload after seed failed', e) }\r\n              alert('Seed persisted to database.')\r\n            } catch (err) {\r\n              setSeedError(String(err))\r\n              console.warn('persistSeed error', err)\r\n              alert('Seed error: ' + String(err))\r\n            } finally {\r\n              setSeedLoading(false)\r\n            }\r\n          }\r\n\r\n          // persistSeedShow: runs the seeder and stores the full server response in state for inspection\r\n          async function persistSeedShow() {\r\n            setSeedError(null)\r\n            setSeedLoading(true)\r\n            setSeedResponseData(null)\r\n            setSeedModalOpen(true)\r\n            try {\r\n              const token = (() => { try { return localStorage.getItem('token') } catch (e) { return null } })()\r\n              const res = await fetch('/api/seed', { method: 'POST', headers: { 'Content-Type': 'application/json', ...(token?{ Authorization: `Bearer ${token}` }:{} ) } })\r\n              const data = await res.json().catch(()=>null)\r\n              setSeedResponseData({ status: res.status, ok: res.ok, body: data })\r\n              if (!res.ok) {\r\n                const msg = data?.error || 'Seed failed'\r\n                const details = data?.details || data?.stack || null\r\n                setSeedError(msg + (details ? ` — ${details}` : ''))\r\n                console.error('Seed API failed response:', data)\r\n                return\r\n              }\r\n              // refresh admin datasets using the current signed-in user\r\n              try { await Promise.all([loadUsers(user).catch(()=>{}), loadCampaigns().catch(()=>{}), loadAnalytics().catch(()=>{})]) } catch (e) { console.warn('Reload after seed failed', e) }\r\n            } catch (err) {\r\n              setSeedError(String(err))\r\n              console.warn('persistSeedShow error', err)\r\n              setSeedResponseData({ status: 'error', ok: false, body: String(err) })\r\n            } finally {\r\n              setSeedLoading(false)\r\n            }\r\n          }\r\n\r\n          if (loading) {\r\n            return null // already handled above\r\n          }\r\n\r\n          return (\r\n            <div style={{padding:20}}>\r\n              <header style={{display:'flex', alignItems:'center', justifyContent:'space-between', borderBottom:'2px solid rgba(57,255,20,0.06)', paddingBottom:12}}>\r\n                <div>\r\n                  <div style={{color:'var(--color-neon, #39ff14)', fontWeight:700}}>ADMIN DASHBOARD</div>\r\n                  <div style={{fontSize:13, color:'#ccc'}}>Organization Overview - {(user && (user.name || user.email)) || '...'}</div>\r\n                  {/* debug: show whether metrics are from live analytics or seeded/local data */}\r\n                  {(() => {\r\n                    try { console.debug('analyticsData (admin):', analyticsData) } catch (e) {}\r\n                    const isLive = !!(analyticsData && ((analyticsData.totalRevenue != null && analyticsData.totalRevenue !== 0) || (Array.isArray(analyticsData.campaignStats) && analyticsData.campaignStats.length > 0) || (analyticsData.revenue != null && analyticsData.revenue !== 0)))\r\n                    return (\r\n                      <div style={{marginTop:6, fontSize:12}}>\r\n                        <span style={{color:'#bbb', marginRight:8}}>Data source:</span>\r\n                        <span style={{padding:'2px 8px', borderRadius:6, background:isLive? 'rgba(57,255,20,0.12)':'rgba(255,77,77,0.06)', color:isLive? 'var(--color-neon)':'#ff9a9a', fontWeight:700}}>{isLive? 'Live' : 'Seeded / Local'}</span>\r\n                      </div>\r\n                    )\r\n                  })()}\r\n                </div>\r\n                <div style={{display:'flex', gap:12}}>\r\n                  {typeof process !== 'undefined' && process.env && process.env.NODE_ENV !== 'production' && (\r\n                    <button className=\"btn\" onClick={persistSeedShow} disabled={seedLoading} style={{background:'#ffb347', color:'#000'}}>{seedLoading ? 'Seeding...' : 'Persist Seed (dev)'}</button>\r\n                  )}\r\n                  <button className=\"btn btn-ghost\" onClick={handleSignOut}>Logout</button>\r\n                </div>\r\n              </header>\r\n\r\n              {signOutMessage && (\r\n                <div style={{position:'fixed', right:20, top:20, background:'rgba(0,0,0,0.8)', color:'var(--color-neon)', padding:'10px 14px', borderRadius:8, border:'1px solid rgba(57,255,20,0.08)'}}>\r\n                  {signOutMessage}\r\n                </div>\r\n              )}\r\n\r\n              {/* Top dashboard metrics removed per request. */}\r\n\r\n              {/* Tabs for admin sections */}\r\n              <div style={{marginTop:18}}>\r\n                <div style={{display:'flex', gap:12}}>\r\n                  <button className={`btn ${tab==='users'?'btn-primary':''}`} onClick={()=>setTab('users')}>User Management</button>\r\n                  <button className={`btn ${tab==='approvals'?'btn-primary':''}`} onClick={()=>setTab('approvals')}>Campaign Approvals</button>\r\n                  <button className={`btn ${tab==='analytics'?'btn-primary':''}`} onClick={()=>setTab('analytics')}>Full Analytics</button>\r\n                  <div style={{marginLeft:'auto', display:'flex', gap:8}}>\r\n                    <button className=\"btn\" onClick={()=>{ window.location.href = '/admin/donors' }}>View Donors</button>\r\n                    <button className=\"btn\" onClick={()=>{ window.location.href = '/admin/campaigns' }}>View Campaigns</button>\r\n                    <button className=\"btn btn-danger\" onClick={() => { setConfirmOpen(true) }} style={{background:'#ff4d4d', color:'#fff', border:'1px solid rgba(255,77,77,0.9)'}}>Clear All Data</button>\r\n                  </div>\r\n                </div>\r\n\r\n                <div style={{marginTop:12}}>\r\n                  {tab==='users' && (\r\n                    <div style={{border:'1px solid rgba(57,255,20,0.08)', padding:16, borderRadius:8}}>\r\n                      <div style={{color:'var(--color-neon)', fontWeight:700}}>User Management</div>\r\n                      <div style={{fontSize:13, color:'#bbb', marginBottom:8}}>Manage user roles and permissions</div>\r\n                      <input className=\"input\" placeholder=\"Search users...\" value={userSearch} onChange={e=>setUserSearch(e.target.value)} />\r\n                      <div style={{marginTop:12, display:'flex', flexDirection:'column', gap:10}}>\r\n                        {(usersList.filter(u => (u.name||u.email||'').toLowerCase().includes(userSearch.toLowerCase()) )).map(u=> (\r\n                          <div key={u.id} style={{padding:12, border:'1px solid rgba(255,255,255,0.03)', borderRadius:6, display:'flex', justifyContent:'space-between', alignItems:'center'}}>\r\n                            <div>\r\n                              <div style={{fontWeight:700}}>{u.name} <span style={{background:u.role==='ADMIN'? 'var(--color-neon)':'#444', color:'#000', padding:'2px 6px', borderRadius:6, fontSize:12, marginLeft:8}}>{u.role.toLowerCase()}</span></div>\r\n                              <div style={{fontSize:12, color:'#bbb'}}>{u.email}</div>\r\n                            </div>\r\n                            <div>\r\n                              {u.role !== 'ADMIN' ? (\r\n                                <button className=\"btn\" onClick={()=>{ setRoleChangeTargetUser(u); setRoleChangeTargetRole('ADMIN'); setRoleChangePassword(''); setRoleChangeError(null); setRoleChangeModalOpen(true) }}>Promote to Admin</button>\r\n                              ) : (\r\n                                <button className=\"btn btn-ghost\" onClick={()=>{ setRoleChangeTargetUser(u); setRoleChangeTargetRole('TEAM_MEMBER'); setRoleChangePassword(''); setRoleChangeError(null); setRoleChangeModalOpen(true) }}>Set as Team Member</button>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  {tab==='approvals' && (\r\n                    <div style={{border:'1px solid rgba(57,255,20,0.08)', padding:16, borderRadius:8}}>\r\n                      <div style={{color:'var(--color-neon)', fontWeight:700}}>Campaign Approvals</div>\r\n                      <div style={{fontSize:13, color:'#bbb', marginBottom:8}}>Review and approve events/campaigns</div>\r\n                      <div style={{marginTop:12, display:'flex', flexDirection:'column', gap:12}}>\r\n                        {(!campaignsList || campaignsList.length===0) ? (\r\n                          <div style={{color:'#888'}}>No campaigns yet.</div>\r\n                        ) : (\r\n                          // dedupe by name so duplicate seed entries don't show repeatedly\r\n                          (() => {\r\n                            const deduped = Object.values((campaignsList || []).reduce((acc, c) => { if (!acc[c.name]) acc[c.name] = c; return acc }, {}))\r\n                            // Only show campaigns that are approved (or have funds which implies approved)\r\n                            const approvedOnly = deduped.filter(c => {\r\n                              const raised = Number(c.raised || 0)\r\n                              return !!(c.approved || raised > 0)\r\n                            })\r\n                            if (approvedOnly.length === 0) return <div style={{color:'#888'}}>No approved campaigns.</div>\r\n                            return approvedOnly.map(c => {\r\n                              const raised = Number(c.raised || 0)\r\n                              const isApproved = !!(c.approved || raised > 0)\r\n                              return (\r\n                                <div key={c.id || c.name} style={{padding:12, border:'1px solid rgba(255,255,255,0.03)', borderRadius:6, display:'flex', justifyContent:'space-between', alignItems:'center'}}>\r\n                                  <div>\r\n                                    <div style={{fontWeight:700}}>{c.name} <span style={{background:isApproved? 'rgba(47,255,85,0.06)':'rgba(255,193,7,0.06)', color:isApproved? 'var(--color-neon)':'#ffd57a', padding:'2px 6px', borderRadius:6, fontSize:12, marginLeft:8}}>{isApproved? 'Approved' : (raised > 0 ? 'Pending (has funds)' : 'Pending')}</span></div>\r\n                                    <div style={{fontSize:12, color:'#bbb'}}>Raised: ${raised.toLocaleString ? raised.toLocaleString() : raised}</div>\r\n                                  </div>\r\n                                  <div style={{minWidth:220, textAlign:'right', color:'#bbb', display:'flex', gap:8, justifyContent:'flex-end'}}>\r\n                                    <button className=\"btn\" onClick={()=>{ setCampaignActionCampaign(c); setCampaignActionType('approve'); setCampaignActionPassword(''); setCampaignActionError(null); setCampaignActionModalOpen(true) }} disabled={isApproved}>Approve</button>\r\n                                    <button className=\"btn btn-ghost\" onClick={()=>{ setCampaignActionCampaign(c); setCampaignActionType('deactivate'); setCampaignActionPassword(''); setCampaignActionError(null); setCampaignActionModalOpen(true) }} disabled={!isApproved}>Deactivate</button>\r\n                                    {/* Only show Deny for campaigns that are not approved */}\r\n                                    {!isApproved && (\r\n                                      <button className=\"btn btn-danger\" onClick={()=>{ if (!confirm('Deny this campaign? This will mark it as not approved.')) return; setCampaignActionCampaign(c); setCampaignActionType('deny'); setCampaignActionPassword(''); setCampaignActionError(null); setCampaignActionModalOpen(true) }}>\r\n                                        Deny\r\n                                      </button>\r\n                                    )}\r\n                                    <button className=\"btn btn-outline-danger\" onClick={()=>{ if (!confirm('Delete this campaign? This will remove the campaign and its donations.')) return; setManualDeleteCampaign(c); setManualDeletePassword(''); setManualDeleteError(null); setManualDeleteModalOpen(true) }} style={{marginLeft:8}}>Delete</button>\r\n                                  </div>\r\n                                </div>\r\n                              )\r\n                            })\r\n                          })()\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Quick campaigns summary on the dashboard area (shows per-campaign breakdown and actions) */}\r\n                  {tab !== 'approvals' && tab !== 'users' && analyticsData && Array.isArray(analyticsData.campaignStats) && analyticsData.campaignStats.length > 0 && (\r\n                    <div style={{marginTop:18}}>\r\n                      <div style={{color:'var(--color-neon)', fontWeight:700, marginBottom:8}}>Campaigns Quick</div>\r\n                      <div style={{display:'grid', gridTemplateColumns:'repeat(2,1fr)', gap:12}}>\r\n                        {analyticsData.campaignStats.map(c => {\r\n                          const raisedAll = Number(c.raised || 0)\r\n                          const gifted = Number(c.gifted || 0)\r\n                          const donationsOnly = Math.max(0, raisedAll - gifted)\r\n                          const goal = Number(c.goal || 0) || 0\r\n                          const progress = goal ? Math.min(100, Math.round((raisedAll / goal) * 100)) : 0\r\n                          const isApproved = !!(c.approved || raisedAll > 0)\r\n                          return (\r\n                            <div key={c.id} style={{padding:12, border:'1px solid rgba(255,255,255,0.03)', borderRadius:8, background:'#070707'}}>\r\n                              <div style={{display:'flex', justifyContent:'space-between', alignItems:'center'}}>\r\n                                <div>\r\n                                  <div style={{fontWeight:700}}>{c.name}</div>\r\n                                  <div style={{fontSize:12, color:'#bbb'}}>Goal: ${goal.toLocaleString ? goal.toLocaleString() : goal}</div>\r\n                                </div>\r\n                                <div style={{textAlign:'right'}}>\r\n                                  <div style={{fontWeight:700}}>${raisedAll.toLocaleString ? raisedAll.toLocaleString() : raisedAll}</div>\r\n                                  <div style={{fontSize:12, color:'#bbb'}}>{progress}%</div>\r\n                                </div>\r\n                              </div>\r\n                              <div style={{display:'flex', gap:8, marginTop:8}}>\r\n                                <div style={{flex:1, fontSize:13}}>\r\n                                  <div style={{color:'#bbb'}}>Donations: <strong style={{color:'var(--color-neon)'}}>${donationsOnly.toLocaleString ? donationsOnly.toLocaleString() : donationsOnly}</strong></div>\r\n                                  <div style={{color:'#bbb'}}>In-Kind Gifts: <strong style={{color:'#9be'}}>${gifted.toLocaleString ? gifted.toLocaleString() : gifted}</strong></div>\r\n                                </div>\r\n                                <div style={{display:'flex', flexDirection:'column', gap:6, minWidth:180, alignItems:'flex-end'}}>\r\n                                  <div style={{display:'flex', gap:8}}>\r\n                                    <button className=\"btn\" onClick={()=>{ setCampaignActionCampaign(c); setCampaignActionType('approve'); setCampaignActionPassword(''); setCampaignActionError(null); setCampaignActionModalOpen(true) }} disabled={isApproved}>Approve</button>\r\n                                    <button className=\"btn btn-ghost\" onClick={()=>{ setCampaignActionCampaign(c); setCampaignActionType('deactivate'); setCampaignActionPassword(''); setCampaignActionError(null); setCampaignActionModalOpen(true) }} disabled={!isApproved}>Deactivate</button>\r\n                                    <button className=\"btn btn-outline-danger\" onClick={()=>{ if (!confirm('Delete this campaign? This will remove the campaign and its donations.')) return; setManualDeleteCampaign(c); setManualDeletePassword(''); setManualDeleteError(null); setManualDeleteModalOpen(true) }} style={{marginLeft:6}}>Delete</button>\r\n                                  </div>\r\n                                  <div style={{fontSize:12, color:isApproved? 'var(--color-neon)':'#ffd57a'}}>{isApproved? 'Approved' : 'Pending'}</div>\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          )\r\n                        })}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  {tab==='analytics' && (\r\n                    <div style={{border:'1px solid rgba(57,255,20,0.08)', padding:16, borderRadius:8}}>\r\n                      <div style={{color:'var(--color-neon)', fontWeight:700}}>Full Analytics</div>\r\n                      <div style={{fontSize:13, color:'#bbb', marginBottom:8}}>Complete financial overview across all partners</div>\r\n                      {!analyticsData ? (\r\n                        <div style={{color:'#888'}}>No analytics available. Seed data and try again.</div>\r\n                      ) : (\r\n                        <div>\r\n                          <div style={{display:'flex', gap:12}}>\r\n                            {(() => {\r\n                              const MIN_DONOR_TOTAL = 100000\r\n                              const campaignSum = Array.isArray(analyticsData?.campaignStats) ? analyticsData.campaignStats.reduce((s,c)=>s + (Number(c.raised||0)||0),0) : 0\r\n                              const donorRaw = Array.isArray(analyticsData?.donorStats) ? analyticsData.donorStats.reduce((s,d)=>s + (Number(d.totalGiving||0)||0),0) : 0\r\n                              const donorTotal = Math.max(donorRaw || 0, MIN_DONOR_TOTAL)\r\n                              // avoid double-counting: donorTotal represents total inflow and typically includes campaign-assigned gifts\r\n                              const totalCombined = Math.max(donorTotal || 0, campaignSum || 0)\r\n                              const donorsCount = analyticsData?.totalDonors ?? analyticsData?.donorCount ?? 0\r\n                              const activePrograms = Array.isArray(analyticsData?.campaignStats) ? analyticsData.campaignStats.length : (Array.isArray(campaignsList) ? campaignsList.length : 0)\r\n                              return (\r\n                                <>\r\n                                  <div style={{flex:1, border:'1px solid rgba(255,255,255,0.03)', padding:12, borderRadius:6}}>\r\n                                    <div style={{color:'var(--color-neon)', fontWeight:700}}>Active Programs</div>\r\n                                    <div style={{fontSize:24, marginTop:8}}>{String(activePrograms)}</div>\r\n                                  </div>\r\n                                  <div style={{flex:1, border:'1px solid rgba(255,255,255,0.03)', padding:12, borderRadius:6}}>\r\n                                    <div style={{color:'var(--color-neon)', fontWeight:700}}>Campaign Revenue</div>\r\n                                    <div style={{fontSize:24, marginTop:8}}>${(campaignSum).toLocaleString ? (campaignSum).toLocaleString() : campaignSum}</div>\r\n                                  </div>\r\n                                  <div style={{flex:1, border:'1px solid rgba(255,255,255,0.03)', padding:12, borderRadius:6}}>\r\n                                    <div style={{color:'var(--color-neon)', fontWeight:700}}>Donor Revenue</div>\r\n                                    <div style={{fontSize:24, marginTop:8}}>${(donorTotal).toLocaleString ? (donorTotal).toLocaleString() : donorTotal}</div>\r\n                                  </div>\r\n                                  <div style={{flex:1, border:'1px solid rgba(255,255,255,0.03)', padding:12, borderRadius:6}}>\r\n                                    <div style={{color:'var(--color-neon)', fontWeight:700}}>Total Revenue</div>\r\n                                    <div style={{fontSize:24, marginTop:8}}>${(totalCombined).toLocaleString ? (totalCombined).toLocaleString() : totalCombined}</div>\r\n                                  </div>\r\n                                </>\r\n                              )\r\n                            })()}\r\n                          </div>\r\n\r\n                          <div style={{marginTop:20}}>\r\n                            <div style={{color:'var(--color-neon)', fontWeight:700, marginBottom:8}}>All Campaigns</div>\r\n                              {(analyticsData.campaignStats || []).map(c => {\r\n                              const raisedAll = Number(c.raised || 0)\r\n                              const raisedGifted = (c.gifted || c.giftedRaised != null) ? Number(c.gifted || c.giftedRaised) : null\r\n                              const usedRaised = raisedGifted != null ? raisedGifted : raisedAll\r\n                              const goal = Number(c.goal || 0) || null\r\n                              const percent = goal ? Math.min(100, Math.round((usedRaised / goal) * 100)) : null\r\n                                const isApproved = usedRaised > 0\r\n                              return (\r\n                                <div key={c.id} style={{padding:8, border:'1px solid rgba(255,255,255,0.03)', borderRadius:6, marginBottom:8}}>\r\n                                  <div style={{display:'flex', justifyContent:'space-between'}}>\r\n                                    <div>\r\n                                        <div style={{display:'flex', alignItems:'center', gap:8}}>\r\n                                          <div style={{fontWeight:700}}>{c.name}</div>\r\n                                          {isApproved && <div style={{background:'var(--color-neon)', color:'#000', padding:'2px 8px', borderRadius:6, fontSize:12, fontWeight:700}}>Approved</div>}\r\n                                        </div>\r\n                                      <div style={{fontSize:12, color:'#bbb'}}>{c.goal?`Goal: $${c.goal}`:''}</div>\r\n                                      {(c.gifted || c.giftedRaised != null) && (\r\n                                        <div style={{fontSize:12, color:'#9be', marginTop:6}}>Raised (gifts): <strong style={{color:'var(--color-neon)'}}>${(c.gifted || c.giftedRaised || 0)}</strong></div>\r\n                                      )}\r\n                                      {percent != null && <div style={{fontSize:12, color:'#bbb'}}>Progress: <strong style={{color:'var(--color-neon)'}}>{percent}%</strong></div>}\r\n                                    </div>\r\n                                    <div style={{textAlign:'right'}}>\r\n                                      <div style={{fontWeight:700}}>${usedRaised}</div>\r\n                                      <div style={{fontSize:12, color:'#bbb'}}>{(percent != null && percent > 0) ? `${percent}%` : ''}</div>\r\n                                    </div>\r\n                                  </div>\r\n                                </div>\r\n                              )\r\n                            })}\r\n                          </div>\r\n\r\n                          <div style={{marginTop:8}}>\r\n                            <div style={{color:'var(--color-neon)', fontWeight:700, marginBottom:8}}>Donor Analytics</div>\r\n                            {(analyticsData.donorStats || []).map(d => (\r\n                              <div key={d.id} style={{padding:8, border:'1px solid rgba(255,255,255,0.03)', borderRadius:6, marginBottom:8, display:'flex', justifyContent:'space-between', alignItems:'center'}}>\r\n                                <div>\r\n                                  <div style={{fontWeight:700}}>{d.name}</div>\r\n                                  <div style={{fontSize:12, color:'#bbb'}}>{d.email}</div>\r\n                                </div>\r\n                                <div style={{textAlign:'right'}}>\r\n                                  <div style={{fontWeight:700}}>${(Number(d.totalGiving || 0)).toLocaleString ? (Number(d.totalGiving || 0)).toLocaleString() : (d.totalGiving || 0)}</div>\r\n                                  <div style={{fontSize:12, color:'#bbb'}}>{d.gifts} gifts</div>\r\n                                  <div style={{marginTop:6}}><button className=\"btn btn-ghost\" onClick={async ()=>{\r\n                                    try {\r\n                                      const token = (() => { try { return localStorage.getItem('token') } catch (e) { return null } })()\r\n                                      const res = await fetch(`/api/donors/${d.id}`, { headers: { ...(token?{ Authorization:`Bearer ${token}` }:{} ) } })\r\n                                      if (!res.ok) { const err = await res.json().catch(()=>({})); return alert('Unable to load donor: '+(err.error||'unknown')) }\r\n                                      const payload = await res.json()\r\n                                      setSelectedDonor({ ...payload.donor, donations: payload.donations })\r\n                                    } catch (e) { console.warn(e); alert('Failed to fetch donor') }\r\n                                  }}>View</button></div>\r\n                                </div>\r\n                              </div>\r\n                            ))}\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {/* donors / campaigns quick summaries removed; use the dedicated pages for full lists */}\r\n\r\n              {confirmOpen && (\r\n                <div className=\"dialog-backdrop\">\r\n                  <div style={{width:420, background:'var(--color-off-black)', border:'1px solid rgba(255,255,255,0.04)', padding:18, borderRadius:8}}>\r\n                    <h3 style={{color:'var(--color-neon)'}}>Confirm Clear All Data</h3>\r\n                    <p style={{color:'#ddd'}}>This will permanently delete donors, donations, campaigns and alerts from the database. This cannot be undone.</p>\r\n                    <p style={{color:'#ffb3b3', fontWeight:700}}>Type your admin password to confirm.</p>\r\n                    <div style={{marginTop:8}}>\r\n                      <input className=\"input\" type=\"password\" value={confirmPassword} onChange={e=>setConfirmPassword(e.target.value)} placeholder=\"Admin password\" autoComplete=\"current-password\" />\r\n                    </div>\r\n                    {confirmError && <div style={{color:'#ff8080', marginTop:8}}>{confirmError}</div>}\r\n                    <div style={{display:'flex', gap:8, justifyContent:'flex-end', marginTop:12}}>\r\n                      <button className=\"btn btn-ghost\" onClick={()=>{ setConfirmOpen(false); setConfirmPassword(''); setConfirmError(null) }}>Cancel</button>\r\n                      <button className=\"btn\" onClick={async ()=>{\r\n                        setConfirmLoading(true); setConfirmError(null);\r\n                        try{\r\n                          const token = (() => { try { return localStorage.getItem('token') } catch (e) { return null } })()\r\n                          const res = await fetch('/api/clear', { method: 'POST', headers: { 'Content-Type':'application/json', ...(token?{ Authorization:`Bearer ${token}` }:{} ) }, body: JSON.stringify({ password: confirmPassword }) })\r\n                          const data = await res.json()\r\n                          if (!res.ok) throw new Error(data?.error || 'Clear failed')\r\n                          setMetrics([]); setPartners([]); setDonors([]); setCampaigns([]); setRecentActivity([]); setAlerts([]); setAnalytics(null)\r\n                          setConfirmOpen(false); setConfirmPassword('')\r\n                        } catch(err) {\r\n                          setConfirmError(err.message)\r\n                        } finally { setConfirmLoading(false) }\r\n                      }} style={{background:'#ff4d4d', color:'#fff'}} disabled={confirmLoading}>{confirmLoading? 'Clearing...' : 'Confirm Clear'}</button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {seedModalOpen && (\r\n                <div className=\"dialog-backdrop\">\r\n                  <div style={{width:720, maxHeight: '70vh', overflow:'auto', background:'var(--color-off-black)', border:'1px solid rgba(255,255,255,0.04)', padding:18, borderRadius:8}}>\r\n                    <h3 style={{color:'var(--color-neon)'}}>Seeder Response</h3>\r\n                    <div style={{fontSize:13, color:'#bbb', marginBottom:8}}>Full response from <code>/api/seed</code></div>\r\n                    <div style={{background:'#080808', padding:12, borderRadius:6, color:'#ddd', maxHeight:380, overflow:'auto'}}>\r\n                      <pre style={{whiteSpace:'pre-wrap', wordBreak:'break-word', color:'#ddd'}}>{JSON.stringify(seedResponseData, null, 2)}</pre>\r\n                    </div>\r\n                    {seedError && <div style={{color:'#ff8080', marginTop:8}}>{seedError}</div>}\r\n                    <div style={{display:'flex', justifyContent:'flex-end', marginTop:12}}>\r\n                      <button className=\"btn btn-ghost\" onClick={()=>{ setSeedModalOpen(false); setSeedResponseData(null); setSeedError(null) }}>Close</button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {campaignActionModalOpen && (\r\n                <div className=\"dialog-backdrop\">\r\n                  <div style={{width:520, background:'var(--color-off-black)', border:'1px solid rgba(255,255,255,0.04)', padding:18, borderRadius:8}}>\r\n                    <h3 style={{color:'var(--color-neon)'}}>{campaignActionType === 'approve' ? 'Approve Campaign' : (campaignActionType === 'deactivate' ? 'Deactivate Campaign' : 'Campaign Action')}</h3>\r\n                    <div style={{color:'#bbb', marginTop:6}}>{campaignActionCampaign?.name}</div>\r\n                    <p style={{color:'#ddd', marginTop:8}}>To confirm this action, enter your admin password.</p>\r\n                    <div style={{marginTop:8}}>\r\n                      <input className=\"input\" type=\"password\" value={campaignActionPassword} onChange={e=>setCampaignActionPassword(e.target.value)} placeholder=\"Admin password\" autoComplete=\"current-password\" />\r\n                    </div>\r\n                    {campaignActionError && <div style={{color:'#ff8080', marginTop:8}}>{campaignActionError}</div>}\r\n                    <div style={{display:'flex', justifyContent:'flex-end', gap:8, marginTop:12}}>\r\n                      <button className=\"btn btn-ghost\" onClick={()=>{ setCampaignActionModalOpen(false); setCampaignActionCampaign(null); setCampaignActionPassword(''); setCampaignActionError(null) }}>Cancel</button>\r\n                      <button className=\"btn\" onClick={async ()=>{\r\n                        if (!campaignActionCampaign || !campaignActionType) return\r\n                        setCampaignActionLoading(true); setCampaignActionError(null)\r\n                        try {\r\n                          const token = (() => { try { return localStorage.getItem('token') } catch (e) { return null } })()\r\n                          const body = { password: campaignActionPassword }\r\n                          if (campaignActionType === 'approve') body.action = 'approve'\r\n                          else if (campaignActionType === 'deactivate') body.action = 'deactivate'\r\n                          else if (campaignActionType === 'deny') body.approved = false\r\n                          const res = await fetch(`/api/campaigns/${campaignActionCampaign.id}/approve`, { method: 'POST', headers: { 'Content-Type':'application/json', ...(token?{ Authorization:`Bearer ${token}` }:{} ) }, body: JSON.stringify(body) })\r\n                          const data = await res.json().catch(()=>null)\r\n                          if (!res.ok) {\r\n                            const msg = data?.error || 'Action failed'\r\n                            setCampaignActionError(msg + (data?.details ? ` — ${data.details}` : ''))\r\n                            return\r\n                          }\r\n                          // refresh admin datasets\r\n                          try { await Promise.all([loadCampaigns().catch(()=>{}), loadAnalytics().catch(()=>{})]) } catch (e) { console.warn('Reload after campaign action failed', e) }\r\n                          setCampaignActionModalOpen(false)\r\n                          setCampaignActionCampaign(null)\r\n                          setCampaignActionPassword('')\r\n                        } catch (err) {\r\n                          console.warn('Campaign action failed', err)\r\n                          setCampaignActionError(String(err))\r\n                        } finally {\r\n                          setCampaignActionLoading(false)\r\n                        }\r\n                      }} disabled={campaignActionLoading || !campaignActionPassword}>{campaignActionLoading? 'Working...' : 'Confirm'}</button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {roleChangeModalOpen && (\r\n                <div className=\"dialog-backdrop\">\r\n                  <div style={{width:520, background:'var(--color-off-black)', border:'1px solid rgba(255,255,255,0.04)', padding:18, borderRadius:8}}>\r\n                    <h3 style={{color:'var(--color-neon)'}}>{roleChangeTargetRole === 'ADMIN' ? 'Promote to Admin' : 'Change Role'}</h3>\r\n                    <div style={{color:'#bbb', marginTop:6}}>{roleChangeTargetUser ? (roleChangeTargetUser.name || roleChangeTargetUser.email) : ''}</div>\r\n                    <p style={{color:'#ddd', marginTop:8}}>Changing a user's role is a privileged action. To confirm, enter your admin password.</p>\r\n                    <div style={{marginTop:8}}>\r\n                      <input className=\"input\" type=\"password\" value={roleChangePassword} onChange={e=>setRoleChangePassword(e.target.value)} placeholder=\"Admin password\" autoComplete=\"current-password\" />\r\n                    </div>\r\n                    {roleChangeError && <div style={{color:'#ff8080', marginTop:8}}>{roleChangeError}</div>}\r\n                    <div style={{display:'flex', justifyContent:'flex-end', gap:8, marginTop:12}}>\r\n                      <button className=\"btn btn-ghost\" onClick={()=>{ setRoleChangeModalOpen(false); setRoleChangeTargetUser(null); setRoleChangeTargetRole(null); setRoleChangePassword(''); setRoleChangeError(null) }}>Cancel</button>\r\n                      <button className=\"btn\" onClick={async ()=>{\r\n                        if (!roleChangeTargetUser || !roleChangeTargetRole) return\r\n                        setRoleChangeLoading(true); setRoleChangeError(null)\r\n                        try {\r\n                          const token = (() => { try { return localStorage.getItem('token') } catch (e) { return null } })()\r\n                          const res = await fetch(`/api/users/${roleChangeTargetUser.id}/role`, { method: 'POST', headers: { 'Content-Type':'application/json', ...(token?{ Authorization:`Bearer ${token}` }:{} ) }, body: JSON.stringify({ role: roleChangeTargetRole, password: roleChangePassword }) })\r\n                          const data = await res.json().catch(()=>null)\r\n                          if (!res.ok) {\r\n                            const msg = data?.error || 'Role change failed'\r\n                            setRoleChangeError(msg + (data?.details ? ` — ${data.details}` : ''))\r\n                            return\r\n                          }\r\n                          try { await loadUsers(); } catch (e) { console.warn('Reload users failed', e) }\r\n                          setRoleChangeModalOpen(false)\r\n                          setRoleChangeTargetUser(null)\r\n                          setRoleChangeTargetRole(null)\r\n                          setRoleChangePassword('')\r\n                        } catch (err) {\r\n                          console.warn('Role change failed', err)\r\n                          setRoleChangeError(String(err))\r\n                        } finally { setRoleChangeLoading(false) }\r\n                      }} disabled={roleChangeLoading || !roleChangePassword}>{roleChangeLoading? 'Working...' : 'Confirm'}</button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {manualDeleteModalOpen && (\r\n                <div className=\"dialog-backdrop\">\r\n                  <div style={{width:520, background:'var(--color-off-black)', border:'1px solid rgba(255,255,255,0.04)', padding:18, borderRadius:8}}>\r\n                    <h3 style={{color:'var(--color-neon)'}}>Delete Campaign</h3>\r\n                    <div style={{color:'#bbb', marginTop:6}}>{manualDeleteCampaign?.name || manualDeleteCampaign?.title}</div>\r\n                    <p style={{color:'#ddd', marginTop:8}}>This will permanently delete the campaign and its donations. To confirm, enter your admin password.</p>\r\n                    <div style={{marginTop:8}}>\r\n                      <input className=\"input\" type=\"password\" value={manualDeletePassword} onChange={e=>setManualDeletePassword(e.target.value)} placeholder=\"Admin password\" autoComplete=\"current-password\" />\r\n                    </div>\r\n                    {manualDeleteError && <div style={{color:'#ff8080', marginTop:8}}>{manualDeleteError}</div>}\r\n                    <div style={{display:'flex', justifyContent:'flex-end', gap:8, marginTop:12}}>\r\n                      <button className=\"btn btn-ghost\" onClick={()=>{ setManualDeleteModalOpen(false); setManualDeleteCampaign(null); setManualDeletePassword(''); setManualDeleteError(null) }}>Cancel</button>\r\n                      <button className=\"btn btn-danger\" onClick={async ()=>{\r\n                        if (!manualDeleteCampaign) return\r\n                        setManualDeleteLoading(true); setManualDeleteError(null)\r\n                        try {\r\n                          const token = (() => { try { return localStorage.getItem('token') } catch (e) { return null } })()\r\n                          const res = await fetch('/api/admin/delete-campaign', { method: 'POST', headers: { 'Content-Type': 'application/json', ...(token?{ Authorization:`Bearer ${token}` }:{} ) }, body: JSON.stringify({ password: manualDeletePassword, id: manualDeleteCampaign.id }) })\r\n                          const data = await res.json().catch(()=>null)\r\n                          if (!res.ok) {\r\n                            setManualDeleteError(data?.error || 'Delete failed')\r\n                            return\r\n                          }\r\n                          try { await Promise.all([loadCampaigns().catch(()=>{}), loadAnalytics().catch(()=>{})]) } catch(e){console.warn('Reload after delete failed', e)}\r\n                          setManualDeleteModalOpen(false)\r\n                          setManualDeleteCampaign(null)\r\n                          setManualDeletePassword('')\r\n                        } catch (err) {\r\n                          console.warn('Manual delete failed', err)\r\n                          setManualDeleteError(String(err))\r\n                        } finally { setManualDeleteLoading(false) }\r\n                      }} disabled={manualDeleteLoading || !manualDeletePassword}>{manualDeleteLoading? 'Deleting...' : 'Delete'}</button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {selectedDonor && (\r\n                <div className=\"dialog-backdrop\">\r\n                  <div style={{width:520, background:'var(--color-off-black)', border:'1px solid rgba(255,255,255,0.04)', padding:18, borderRadius:8}}>\r\n                    <h3 style={{color:'var(--color-neon)'}}>{selectedDonor.name}</h3>\r\n                    <div style={{color:'#bbb', marginTop:6}}>{selectedDonor.email}</div>\r\n                    <div style={{display:'flex', gap:12, marginTop:12}}>\r\n                      <div style={{flex:1, padding:12, border:'1px solid rgba(255,255,255,0.03)', borderRadius:6}}>\r\n                        <div style={{fontSize:12, color:'#bbb'}}>Total Giving</div>\r\n                        <div style={{fontWeight:700, fontSize:18}}>${selectedDonor.totalGiving}</div>\r\n                      </div>\r\n                      <div style={{flex:1, padding:12, border:'1px solid rgba(255,255,255,0.03)', borderRadius:6}}>\r\n                        <div style={{fontSize:12, color:'#bbb'}}>Gifts</div>\r\n                        <div style={{fontWeight:700, fontSize:18}}>{selectedDonor.gifts}</div>\r\n                      </div>\r\n                    </div>\r\n                    {selectedDonor.donations && selectedDonor.donations.length > 0 && (\r\n                      <div style={{marginTop:12}}>\r\n                        <div style={{fontWeight:700, color:'var(--color-neon)', marginBottom:8}}>Donation History</div>\r\n                        <div style={{display:'flex', flexDirection:'column', gap:8}}>\r\n                          {selectedDonor.donations.map(d => (\r\n                            <div key={d.id} style={{padding:8, border:'1px solid rgba(255,255,255,0.03)', borderRadius:6, display:'flex', justifyContent:'space-between'}}>\r\n                              <div>\r\n                                <div style={{fontWeight:700}}>${d.amount}</div>\r\n                                <div style={{fontSize:12, color:'#bbb'}}>{new Date(d.date).toLocaleDateString()}</div>\r\n                              </div>\r\n                              <div style={{fontSize:12, color:'#bbb'}}>{d.campaignId ? `Campaign: ${d.campaignId}` : ''}</div>\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                    <div style={{display:'flex', justifyContent:'flex-end', marginTop:12}}>\r\n                      <button className=\"btn btn-ghost\" onClick={()=>setSelectedDonor(null)}>Close</button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n            </div>\r\n          )\r\n        }\r\n","import { PagesRouteModule } from \"next/dist/esm/server/route-modules/pages/module.compiled\";\nimport { RouteKind } from \"next/dist/esm/server/route-kind\";\nimport { hoist } from \"next/dist/esm/build/templates/helpers\";\n// Import the app and document modules.\nimport * as document from \"INNER_DOCUMENT\";\nimport * as app from \"INNER_APP\";\n// Import the userland code.\nimport * as userland from \"INNER_PAGE\";\nimport { getHandler } from \"next/dist/esm/server/route-modules/pages/pages-handler\";\n// Re-export the component (should be the default export).\nexport default hoist(userland, 'default');\n// Re-export methods.\nexport const getStaticProps = hoist(userland, 'getStaticProps');\nexport const getStaticPaths = hoist(userland, 'getStaticPaths');\nexport const getServerSideProps = hoist(userland, 'getServerSideProps');\nexport const config = hoist(userland, 'config');\nexport const reportWebVitals = hoist(userland, 'reportWebVitals');\n// Re-export legacy methods.\nexport const unstable_getStaticProps = hoist(userland, 'unstable_getStaticProps');\nexport const unstable_getStaticPaths = hoist(userland, 'unstable_getStaticPaths');\nexport const unstable_getStaticParams = hoist(userland, 'unstable_getStaticParams');\nexport const unstable_getServerProps = hoist(userland, 'unstable_getServerProps');\nexport const unstable_getServerSideProps = hoist(userland, 'unstable_getServerSideProps');\n// Create and export the route module that will be consumed.\nexport const routeModule = new PagesRouteModule({\n    definition: {\n        kind: RouteKind.PAGES,\n        page: \"/admin\",\n        pathname: \"/admin\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    distDir: process.env.__NEXT_RELATIVE_DIST_DIR || '',\n    relativeProjectDir: process.env.__NEXT_RELATIVE_PROJECT_DIR || '',\n    components: {\n        // default export might not exist when optimized for data only\n        App: app.default,\n        Document: document.default\n    },\n    userland\n});\nexport const handler = getHandler({\n    srcPage: \"/admin\",\n    config,\n    userland,\n    routeModule,\n    getStaticPaths,\n    getStaticProps,\n    getServerSideProps\n});\n\n//# sourceMappingURL=pages.js.map\n"],"names":[],"mappings":"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","ignoreList":[1]}