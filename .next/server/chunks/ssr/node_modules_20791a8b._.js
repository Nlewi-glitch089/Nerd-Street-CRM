module.exports=[50852,(a,b,c)=>{"use strict";function d(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(d=function(a){return a?c:b})(a)}c._=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=d(b);if(c&&c.has(a))return c.get(a);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,c&&c.set(a,e),e}},40175,(a,b,c)=>{"use strict";b.exports=a.r(1951).vendored.contexts.HeadManagerContext},42939,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"warnOnce",{enumerable:!0,get:function(){return d}});let d=a=>{}},37125,a=>{"use strict";var b=a.i(79168),c=a.i(27068),d=a.i(32759),e=a.i(39141),f=a.i(27342),g=a.i(8171),h=a.i(27669),i=a.i(41910);function j(){let a=(0,i.useRouter)(),[b,c]=(0,h.useState)(!0),[d,e]=(0,h.useState)(null),[f,j]=(0,h.useState)(null),[k,l]=(0,h.useState)([]);async function m(){try{let a=await fetch("/api/campaigns");if(!a.ok)return;let b=(await a.json()).campaigns||[];if(!b||0===b.length){try{let a=(()=>{try{return localStorage.getItem("token")}catch(a){return null}})();if((await fetch("/api/seed",{method:"POST",headers:{"Content-Type":"application/json",...a?{Authorization:`Bearer ${a}`}:{}}})).ok){let b=await fetch("/api/campaigns");if(b.ok){let c=await b.json();l(c.campaigns||[]);try{let b=await fetch("/api/analytics");if(!b.ok)return;let c=await b.json();c&&(0!==c.totalRevenue&&null!=c.totalRevenue||Array.isArray(c.campaignStats)&&0!==c.campaignStats.length)||await fetch("/api/seed",{method:"POST",headers:{"Content-Type":"application/json",...a?{Authorization:`Bearer ${a}`}:{}}})}catch(a){console.warn("Analytics check after seed failed",a)}return}}}catch(a){console.warn("Auto-seed campaigns failed",a)}try{l([{id:"sample-c-1",name:"Spring Fundraiser 2025",goal:75e3,raised:12e3,giftedRaised:2e3,approved:!0},{id:"sample-c-2",name:"Community Outreach Q2",goal:2e4,raised:5e3,giftedRaised:800,approved:!1},{id:"sample-c-3",name:"Scholarship Drive",goal:3e4,raised:15e3,giftedRaised:3e3,approved:!0},{id:"sample-c-4",name:"Winter Relief 2025",goal:4e4,raised:22e3,giftedRaised:5e3,approved:!0}]);return}catch(a){console.warn("Local sample campaigns failed",a)}l([]);return}l(b)}catch(a){console.warn(a)}}return((0,h.useEffect)(()=>{let a=!0;return(async()=>{try{let a=(()=>{try{return localStorage.getItem("token")}catch(a){return null}})();if(!a){e("Not authenticated"),c(!1);return}let b=await fetch("/api/protected",{headers:{Authorization:`Bearer ${a}`}});if(!b.ok){e("Session invalid"),c(!1);return}let d=await b.json();if(!d?.user){e("Unable to load user"),c(!1);return}j(d.user),await m()}catch(a){console.warn(a),e("Network error")}finally{a&&c(!1)}})(),()=>{a=!1}},[]),b)?(0,g.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--color-black, #000)"},children:(0,g.jsxs)("div",{style:{textAlign:"center",color:"var(--color-neon, #39ff14)"},children:[(0,g.jsx)("div",{style:{width:92,height:92,borderRadius:46,border:"6px solid rgba(57,255,20,0.12)",borderTopColor:"var(--color-neon, #39ff14)",animation:"spin 1s linear infinite",margin:"0 auto 18px"}}),(0,g.jsx)("div",{children:"Loading campaigns..."}),(0,g.jsx)("style",{children:"@keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}"})]})}):d?(0,g.jsx)("div",{style:{padding:24,color:"#ff8080"},children:d}):(0,g.jsxs)("div",{style:{padding:20},children:[(0,g.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,g.jsx)("h2",{style:{color:"var(--color-neon)"},children:"Campaigns"}),(0,g.jsx)("div",{children:(0,g.jsx)("button",{className:"btn",onClick:()=>a.push("/admin"),children:"Back"})})]}),(0,g.jsx)("div",{style:{marginTop:12},children:0===k.length?(0,g.jsx)("div",{style:{color:"#888"},children:"No campaigns found."}):(0,g.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:k.map(a=>{let b=Number(a.raised||0),c=null!=a.giftedRaised?Number(a.giftedRaised):null!=a.gifted?Number(a.gifted):null,d=null!=c?c:b,e=Number(a.goal||0)||null,f=e?Math.min(100,Math.round(d/e*100)):null,h=!!a.approved||d>0;return(0,g.jsxs)("div",{style:{padding:12,border:"1px solid rgba(255,255,255,0.03)",borderRadius:8,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,g.jsxs)("div",{style:{flex:1},children:[(0,g.jsx)("div",{style:{fontWeight:700},children:a.name||a.title}),(0,g.jsxs)("div",{style:{fontSize:12,color:"#bbb"},children:["Raised: $",d," — Goal: ",e?`$${e}`:"—"]}),(a.gifted||null!=a.giftedRaised)&&(0,g.jsxs)("div",{style:{fontSize:12,color:"#9be",marginTop:6},children:["Raised (gifts): ",(0,g.jsxs)("strong",{style:{color:"var(--color-neon)"},children:["$",a.gifted||a.giftedRaised||0]})]}),null!=f&&(0,g.jsxs)("div",{style:{marginTop:6},children:[(0,g.jsxs)("div",{style:{fontSize:12,color:"#bbb"},children:["Progress: ",(0,g.jsxs)("strong",{style:{color:"var(--color-neon)"},children:[f,"%"]})]}),(0,g.jsx)("div",{style:{height:8,background:"#111",borderRadius:6,marginTop:6,overflow:"hidden"},children:(0,g.jsx)("div",{style:{height:"100%",width:`${f}%`,background:"linear-gradient(90deg, var(--color-neon), #00cc66)"}})})]}),(0,g.jsxs)("div",{style:{fontSize:12,color:"#bbb",marginTop:6},children:["Approved: ",h?"Yes":"No"]})]}),(0,g.jsx)("div",{style:{textAlign:"right",color:"#bbb",minWidth:120},children:h?"Approved":"Not approved"})]},a.id)})})})]})}a.s(["default",()=>j],30606);var k=a.i(30606),l=a.i(9193);let m=(0,d.hoist)(k,"default"),n=(0,d.hoist)(k,"getStaticProps"),o=(0,d.hoist)(k,"getStaticPaths"),p=(0,d.hoist)(k,"getServerSideProps"),q=(0,d.hoist)(k,"config"),r=(0,d.hoist)(k,"reportWebVitals"),s=(0,d.hoist)(k,"unstable_getStaticProps"),t=(0,d.hoist)(k,"unstable_getStaticPaths"),u=(0,d.hoist)(k,"unstable_getStaticParams"),v=(0,d.hoist)(k,"unstable_getServerProps"),w=(0,d.hoist)(k,"unstable_getServerSideProps"),x=new b.PagesRouteModule({definition:{kind:c.RouteKind.PAGES,page:"/admin/campaigns",pathname:"/admin/campaigns",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:f.default,Document:e.default},userland:k}),y=(0,l.getHandler)({srcPage:"/admin/campaigns",config:q,userland:k,routeModule:x,getStaticPaths:o,getStaticProps:n,getServerSideProps:p});a.s(["config",0,q,"default",0,m,"getServerSideProps",0,p,"getStaticPaths",0,o,"getStaticProps",0,n,"handler",0,y,"reportWebVitals",0,r,"routeModule",0,x,"unstable_getServerProps",0,v,"unstable_getServerSideProps",0,w,"unstable_getStaticParams",0,u,"unstable_getStaticPaths",0,t,"unstable_getStaticProps",0,s],37125)}];

//# sourceMappingURL=node_modules_20791a8b._.js.map