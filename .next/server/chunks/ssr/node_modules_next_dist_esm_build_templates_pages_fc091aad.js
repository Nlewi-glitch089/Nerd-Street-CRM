module.exports=[99312,a=>{"use strict";var b=a.i(79168),c=a.i(27068),d=a.i(32759),e=a.i(39141),f=a.i(27342),g=a.i(8171),h=a.i(2093),i=a.i(27669),j=a.i(41910);function k(){let a=(0,j.useRouter)(),[b,c]=(0,i.useState)(!0),[d,e]=(0,i.useState)(null),[f,k]=(0,i.useState)(null),[l,m]=(0,i.useState)([]),[n,o]=(0,i.useState)([]),[p,q]=(0,i.useState)([]),[r,s]=(0,i.useState)(null),[t,u]=(0,i.useState)([]),[v,w]=(0,i.useState)(null);function x(a){let b=a.owners||[];if(!b.length)return"";let c=b.map(b=>{let c=(a.contacts||[]).find(a=>a.email===b);return c?`${c.name}${c.title?` — ${c.title}`:""}`:b.includes("@")?`${b}`:b});return 1===c.length?`Assigned: ${c[0]}`:`Team: ${c.join(", ")}`}function y(){m([{id:"t1",title:"Follow up with Alienware",due:"2025-12-14",note:"Send co-marketing proposal and content calendar"},{id:"t2",title:"Reach out to Red Bull Gaming",due:"2025-12-19",note:"Discuss 2025 renewal terms"}]),o([{id:"f1",name:"Back-to-School Supply Drive",days:30},{id:"f2",name:"Summer Youth Programs Fund",days:60},{id:"f3",name:"Neighborhood Health Initiative",days:90}]),q([{name:"GameStop",tag:"At Risk",health:"45%"},{name:"Discord",tag:"Pending",health:"70%"},{name:"Alienware",tag:"Active",health:"85%"},{name:"Red Bull Gaming",tag:"Active",health:"92%"}]),u([{id:"r1",partner:"Alienware",text:"Equipment delivery confirmed for new venue opening.",date:"Dec 7, 2025"},{id:"r2",partner:"Red Bull Gaming",text:"Discussed Q1 2025 tournament schedule and activation opportunities.",date:"Dec 4, 2025"}])}return((0,i.useEffect)(()=>{let a=!0;return(async()=>{try{let b=(()=>{try{return localStorage.getItem("token")}catch(a){return null}})();if(!b){a&&k("Not authenticated");return}let c=await fetch("/api/protected",{headers:{Authorization:`Bearer ${b}`}});if(!c.ok){a&&k("Session invalid or expired");try{localStorage.removeItem("token")}catch(a){}return}let d=await c.json();if(!d?.user){a&&k("Unable to load user");return}if("TEAM_MEMBER"!==d.user.role&&"ADMIN"!==d.user.role){a&&k("Unauthorized — team member access required");return}if(a&&e(d.user),a)try{let a=await fetch("/api/seed",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`}});if(a.ok){let b=await a.json();m(b.tasks||[]),o(b.followUps||[]);let c=(b.partners||[]).map(a=>({name:a.name||a.title||"",tag:a.tag||"",health:a.health||"",owners:a.owners||[],description:a.description||"",contractValue:a.contractValue||"",startDate:a.startDate||"",endDate:a.endDate||"",lastContact:a.lastContact||"",contacts:a.contacts||[],interactions:a.interactions||[],programs:a.programs||[],reminders:a.reminders||[]})),e=c.filter(a=>!a.owners||!(a.owners.length>0)||a.owners.includes(d.user.email));q(e.length?e:c);let f=(b.recentActivity||[]).map((a,b)=>({id:a.id||`r${b+1}`,partner:a.partner||a.title||a.name||"",text:a.text||a.note||"",date:a.date||a.at||""}));u(f)}else y()}catch(a){y()}}catch(b){a&&k("Network error")}finally{a&&c(!1)}})(),()=>{a=!1}},[]),b)?(0,g.jsxs)("div",{style:{position:"fixed",inset:0,display:"flex",alignItems:"center",justifyContent:"center",background:"#000",zIndex:9999},className:"jsx-bc10eaca985a6337",children:[(0,g.jsxs)("div",{style:{textAlign:"center"},className:"jsx-bc10eaca985a6337",children:[(0,g.jsx)("div",{style:{width:84,height:84,borderRadius:999,border:"8px solid rgba(57,255,20,0.06)",borderTopColor:"#39ff14",boxShadow:"0 0 30px rgba(57,255,20,0.08)",margin:"0 auto",animation:"spin 1s linear infinite"},className:"jsx-bc10eaca985a6337"}),(0,g.jsx)("div",{style:{color:"#39ff14",marginTop:14,fontSize:16},className:"jsx-bc10eaca985a6337",children:"Loading dashboard..."})]}),(0,g.jsx)(h.default,{id:"bc10eaca985a6337",children:"@keyframes spin{to{transform:rotate(360deg)}}"})]}):f?(0,g.jsx)("div",{style:{padding:20,color:"red"},children:f}):(0,g.jsxs)("div",{style:{padding:18},children:[(0,g.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{style:{color:"var(--color-neon)",fontWeight:800,fontSize:18},children:"MY WORKSPACE"}),(0,g.jsxs)("div",{style:{color:"#bbb"},children:["Welcome back",d?.name?`, ${d.name}`:"",d?.role?` — ${d.role.replace("_"," ")}`:""]})]}),(0,g.jsxs)("div",{style:{display:"flex",gap:12},children:[(0,g.jsx)("button",{className:"btn",onClick:()=>{try{a.push("/profile")}catch(a){console.warn("Profile nav failed",a)}},children:"Profile"}),(0,g.jsx)("button",{className:"btn btn-ghost",onClick:()=>{try{localStorage.removeItem("token")}catch(a){console.warn("removeItem token failed",a)}try{console.log("Team sign-out: clearing client state"),e(null),m([]),o([]),q([]),u([])}catch(a){console.warn("Error clearing client state",a)}w("Signed out"),setTimeout(()=>{w(null);try{a.replace("/")}catch(a){console.warn("router.replace failed during sign-out, falling back to location.href",a);try{window.location.href="/"}catch(a){console.warn("Fallback redirect failed",a)}}},800)},children:"Logout"})]})]}),v&&(0,g.jsx)("div",{style:{position:"fixed",right:20,top:20,background:"rgba(0,0,0,0.8)",color:"var(--color-neon)",padding:"10px 14px",borderRadius:8,border:"1px solid rgba(57,255,20,0.08)"},children:v}),(0,g.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3,1fr)",gap:12,marginBottom:14},children:[(0,g.jsxs)("div",{style:{padding:18,border:"1px solid rgba(47,255,85,0.16)",borderRadius:8},children:[(0,g.jsx)("div",{style:{fontWeight:700,color:"var(--color-neon)"},children:"My Tasks"}),(0,g.jsx)("div",{style:{fontSize:28,marginTop:8},children:l.length}),(0,g.jsx)("div",{style:{fontSize:12,color:"#bbb"},children:"Action items due soon"})]}),(0,g.jsxs)("div",{style:{padding:18,border:"1px solid rgba(255,193,7,0.12)",borderRadius:8},children:[(0,g.jsx)("div",{style:{fontWeight:700,color:"#ffcc00"},children:"Follow-ups Needed"}),(0,g.jsx)("div",{style:{fontSize:28,marginTop:8},children:n.length}),(0,g.jsx)("div",{style:{fontSize:12,color:"#bbb"},children:"Partners need contact"})]}),(0,g.jsxs)("div",{style:{padding:18,border:"1px solid rgba(66,138,255,0.12)",borderRadius:8},children:[(0,g.jsx)("div",{style:{fontWeight:700,color:"#6fb3ff"},children:"My Partners"}),(0,g.jsx)("div",{style:{fontSize:28,marginTop:8},children:p.length}),(0,g.jsx)("div",{style:{fontSize:12,color:"#bbb"},children:"Active accounts"})]})]}),(0,g.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:12},children:[r&&(0,g.jsxs)("div",{style:{gridColumn:"1 / span 2",padding:18,border:"1px solid rgba(57,255,20,0.12)",borderRadius:8,marginBottom:8},children:[(0,g.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{style:{fontWeight:900,fontSize:18},children:r.name}),(0,g.jsx)("div",{style:{fontSize:13,color:"#bbb",marginTop:6},children:r.description}),r.owners&&r.owners.length>0&&(0,g.jsx)("div",{style:{fontSize:12,color:"#9ea",marginTop:8},children:x(r)})]}),(0,g.jsxs)("div",{children:[(0,g.jsxs)("div",{style:{textAlign:"right"},children:[(0,g.jsx)("div",{style:{fontSize:12,color:"#bbb"},children:"Partnership Health"}),(0,g.jsx)("div",{style:{fontSize:22,color:"#39ff14",fontWeight:700},children:r.health||"—"})]}),(0,g.jsx)("button",{className:"btn btn-ghost",onClick:()=>s(null),style:{marginTop:8},children:"Close"})]})]}),(0,g.jsx)("div",{style:{display:"flex",gap:20,marginTop:12},children:(0,g.jsxs)("div",{style:{flex:1},children:[(0,g.jsxs)("div",{style:{display:"flex",gap:12},children:[(0,g.jsxs)("div",{style:{flex:1},children:[(0,g.jsx)("strong",{children:"Contract Value"}),(0,g.jsx)("div",{style:{marginTop:6},children:r.contractValue||"—"})]}),(0,g.jsxs)("div",{style:{flex:1},children:[(0,g.jsx)("strong",{children:"Start Date"}),(0,g.jsx)("div",{style:{marginTop:6},children:r.startDate||"—"})]}),(0,g.jsxs)("div",{style:{flex:1},children:[(0,g.jsx)("strong",{children:"End Date"}),(0,g.jsx)("div",{style:{marginTop:6},children:r.endDate||"—"})]}),(0,g.jsxs)("div",{style:{flex:1},children:[(0,g.jsx)("strong",{children:"Last Contact"}),(0,g.jsx)("div",{style:{marginTop:6},children:r.lastContact||"—"})]})]}),(r.interactions||[]).length>0&&(0,g.jsxs)("div",{style:{marginTop:12},children:[(0,g.jsx)("div",{style:{fontWeight:700,color:"#39ff14"},children:"Recent Interactions"}),(r.interactions||[]).slice().sort((a,b)=>new Date(b.date)-new Date(a.date)).slice(0,2).map(a=>(0,g.jsxs)("div",{style:{marginTop:8},children:[(0,g.jsxs)("div",{style:{fontWeight:700},children:[a.type||a.kind||a.title," ",(0,g.jsx)("span",{style:{fontSize:12,color:"#bbb",marginLeft:8},children:a.date})]}),(0,g.jsx)("div",{style:{color:"#bbb",marginTop:4},children:a.note||a.text})]},a.id||a.date))]})]})})]}),(0,g.jsxs)("div",{style:{padding:18,border:"1px solid rgba(255,255,255,0.03)",borderRadius:8},children:[(0,g.jsx)("div",{style:{fontWeight:700,color:"var(--color-neon)",marginBottom:8},children:"Priority Actions"}),0===l.length?(0,g.jsx)("div",{style:{color:"#888"},children:"No tasks"}):l.map(a=>{let b=function(a){if(!a)return!1;let b=new Date(a);if(isNaN(b))return!1;let c=new Date;return b<new Date(c.getFullYear(),c.getMonth(),c.getDate())}(a.due);return(0,g.jsxs)("div",{style:{padding:12,border:b?"1px solid rgba(255,77,79,0.18)":"1px solid rgba(255,255,255,0.03)",borderRadius:6,marginBottom:8,background:b?"rgba(255,77,79,0.03)":"transparent"},children:[(0,g.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,g.jsx)("div",{style:{fontWeight:700},children:a.title}),b&&(0,g.jsxs)("div",{style:{fontSize:12,color:"#ff4d4f",fontWeight:700},children:["Overdue · ",function(a){let b=new Date(a);if(isNaN(b))return 0;let c=new Date,d=Math.floor((new Date(c.getFullYear(),c.getMonth(),c.getDate())-b)/864e5);return d>0?d:0}(a.due),"d"]})]}),(0,g.jsx)("div",{style:{fontSize:13,color:"#bbb",marginTop:6},children:a.note}),(0,g.jsxs)("div",{style:{fontSize:12,color:b?"#ffb3b3":"#ffd57a",marginTop:6},children:["Due: ",a.due]})]},a.id)})]}),(0,g.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[(0,g.jsxs)("div",{style:{padding:14,border:"1px solid rgba(255,255,255,0.03)",borderRadius:8},children:[(0,g.jsx)("div",{style:{fontWeight:700,color:"var(--color-neon)"},children:"Recent Activity"}),t.map(a=>(0,g.jsxs)("div",{style:{marginTop:10},children:[(0,g.jsxs)("div",{style:{fontWeight:700},children:[a.partner," ",(0,g.jsx)("span",{style:{fontSize:12,color:"#bbb",marginLeft:8},children:a.date})]}),(0,g.jsx)("div",{style:{fontSize:13,color:"#bbb"},children:a.text})]},a.id))]}),(0,g.jsxs)("div",{style:{padding:14,border:"1px solid rgba(255,255,255,0.03)",borderRadius:8},children:[(0,g.jsx)("div",{style:{fontWeight:700,color:"var(--color-neon)"},children:"Partners"}),0===p.length?(0,g.jsx)("div",{style:{color:"#888",marginTop:8},children:"No partners assigned"}):(0,g.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:8,marginTop:8},children:p.map((b,c)=>{let d=(b.name||"").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");return(0,g.jsxs)("div",{style:{padding:10,border:"1px solid rgba(255,255,255,0.02)",borderRadius:6,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,g.jsxs)("div",{onClick:()=>s(b),style:{cursor:"pointer"},children:[(0,g.jsx)("div",{style:{fontWeight:700},children:b.name}),(0,g.jsxs)("div",{style:{fontSize:12,color:"#bbb"},children:[b.tag,b.health?` \xb7 ${b.health}`:""]}),(0,g.jsx)("div",{style:{fontSize:11,color:"#9ea",marginTop:6},children:x(b)}),(0,g.jsxs)("div",{style:{fontSize:11,color:"#bbb",marginTop:4},children:[b.lastContact?`Last: ${b.lastContact}`:""," ",b.reminders?`\xb7 Reminders: ${b.reminders.length}`:""]})]}),(0,g.jsx)("div",{children:(0,g.jsx)("button",{className:"btn btn-link",onClick:()=>{try{a.push(`/partners/${d}`)}catch(a){console.warn("nav to partner page failed",a)}},children:"View"})})]},b.name+c)})})]}),(0,g.jsxs)("div",{style:{padding:14,border:"1px solid rgba(255,255,255,0.03)",borderRadius:8},children:[(0,g.jsx)("div",{style:{fontWeight:700,color:"var(--color-neon)"},children:"Needs Follow-up"}),(0,g.jsx)("div",{style:{fontSize:12,color:"#bbb",marginTop:6},children:"This section surfaces campaigns and partners that require follow-up. Click any item to inspect details."}),(0,g.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8,marginTop:8},children:[0===n.length&&(0,g.jsx)("div",{style:{color:"#888"},children:"No follow-ups scheduled"}),n.map(a=>(0,g.jsxs)("div",{style:{padding:10,border:"1px solid rgba(57,255,20,0.04)",borderRadius:6,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{style:{fontWeight:700},children:a.campaign?.name||a.name}),(0,g.jsx)("div",{style:{fontSize:12,color:"#bbb"},children:a.note||`${a.days}+ days since contact`}),a.assignedRole&&(0,g.jsxs)("div",{style:{fontSize:12,color:"#9ea",marginTop:6},children:["Assigned Role: ",a.assignedRole]}),a.support&&a.support.length>0&&(0,g.jsxs)("div",{style:{fontSize:12,color:"#9ea",marginTop:4},children:["Support: ",a.support.map(a=>a.name+(a.role?` — ${a.role}`:"")).join(", ")]})]}),(0,g.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:6},children:[(0,g.jsx)("div",{style:{width:10,height:10,borderRadius:10,background:a.days&&a.days>60?"#ff4d4f":"#ffcc00"}}),(0,g.jsx)("button",{className:"btn btn-link",onClick:()=>{let b=p.find(b=>(b.name||"").toLowerCase().includes((a.campaign?.name||a.name||"").toLowerCase().split(" ")[0]));b?s(b):alert("Open campaign details in Admin view to manage this follow-up")},children:"View"})]})]},a.id))]})]})]})]})]})}a.s(["default",()=>k],80310);var l=a.i(80310),m=a.i(9193);let n=(0,d.hoist)(l,"default"),o=(0,d.hoist)(l,"getStaticProps"),p=(0,d.hoist)(l,"getStaticPaths"),q=(0,d.hoist)(l,"getServerSideProps"),r=(0,d.hoist)(l,"config"),s=(0,d.hoist)(l,"reportWebVitals"),t=(0,d.hoist)(l,"unstable_getStaticProps"),u=(0,d.hoist)(l,"unstable_getStaticPaths"),v=(0,d.hoist)(l,"unstable_getStaticParams"),w=(0,d.hoist)(l,"unstable_getServerProps"),x=(0,d.hoist)(l,"unstable_getServerSideProps"),y=new b.PagesRouteModule({definition:{kind:c.RouteKind.PAGES,page:"/team",pathname:"/team",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:f.default,Document:e.default},userland:l}),z=(0,m.getHandler)({srcPage:"/team",config:r,userland:l,routeModule:y,getStaticPaths:p,getStaticProps:o,getServerSideProps:q});a.s(["config",0,r,"default",0,n,"getServerSideProps",0,q,"getStaticPaths",0,p,"getStaticProps",0,o,"handler",0,z,"reportWebVitals",0,s,"routeModule",0,y,"unstable_getServerProps",0,w,"unstable_getServerSideProps",0,x,"unstable_getStaticParams",0,v,"unstable_getStaticPaths",0,u,"unstable_getStaticProps",0,t],99312)}];

//# sourceMappingURL=node_modules_next_dist_esm_build_templates_pages_fc091aad.js.map