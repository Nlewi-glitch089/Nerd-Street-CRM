module.exports=[70406,(e,a,t)=>{a.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},29173,(e,a,t)=>{a.exports=e.x("@prisma/client",()=>require("@prisma/client"))},18510,(e,a,t)=>{a.exports=e.x("bcryptjs",()=>require("bcryptjs"))},29480,e=>{"use strict";let a;var t=e.i(26747),i=e.i(90406),n=e.i(44898),o=e.i(62950),r=e.i(29173),l=e.i(18510);async function d(e,t){if("POST"!==e.method)return t.status(405).json({error:"Method not allowed"});try{try{await a.$connect()}catch(e){return console.error("Prisma connection error",e),t.status(500).json({error:"Database connection failed",details:String(e&&e.message?e.message:e)})}let e={},i=new Set(["Back-to-School Supply Drive","Summer Youth Programs Fund","Holiday Giving Drive 2025"]);for(let t of[{name:"Back-to-School Supply Drive",goal:15e3},{name:"Summer Youth Programs Fund",goal:4e4},{name:"Neighborhood Health Initiative",goal:25e3},{name:"Technology Access Campaign",goal:6e4},{name:"Holiday Giving Drive 2025",goal:9e4}])try{let n=await a.campaign.findFirst({where:{name:t.name}});if(n){if(i.has(t.name)&&!n.approved)try{n=await a.campaign.update({where:{id:n.id},data:{approved:!0}})}catch(e){console.warn("Failed to update campaign approved flag for",t.name,e)}}else n=await a.campaign.create({data:{name:t.name,goal:t.goal,approved:i.has(t.name)}});e[t.name]=n}catch(e){console.warn("Failed to ensure campaign",t.name,e)}let n=e["Back-to-School Supply Drive"],o=e["Summer Youth Programs Fund"],r=e["Holiday Giving Drive 2025"],d=await a.donor.upsert({where:{email:"nate.marshall@example.com"},update:{},create:{firstName:"Nate",lastName:"Marshall",email:"nate.marshall@example.com",totalGiving:12500,lastGiftAt:new Date("2025-03-03")}}),s=await a.donor.upsert({where:{email:"evelyn.hart@example.com"},update:{},create:{firstName:"Evelyn",lastName:"Hart",email:"evelyn.hart@example.com",totalGiving:4200,lastGiftAt:new Date("2025-01-12")}}),m=[{firstName:"Ava",lastName:"Chen",email:"ava.chen@example.com",totalGiving:1200,lastGiftAt:new Date("2025-11-01")},{firstName:"Liam",lastName:"Smith",email:"liam.smith@example.com",totalGiving:500,lastGiftAt:new Date("2025-09-18")},{firstName:"Olivia",lastName:"Garcia",email:"olivia.garcia@example.com",totalGiving:300,lastGiftAt:new Date("2025-08-10")},{firstName:"Noah",lastName:"Johnson",email:"noah.johnson@example.com",totalGiving:0,lastGiftAt:null},{firstName:"Sophia",lastName:"Martinez",email:"sophia.martinez@example.com",totalGiving:750,lastGiftAt:new Date("2025-07-04")},{firstName:"Mason",lastName:"Brown",email:"mason.brown@example.com",totalGiving:2500,lastGiftAt:new Date("2025-06-21")},{firstName:"Isabella",lastName:"Davis",email:"isabella.davis@example.com",totalGiving:0,lastGiftAt:null},{firstName:"Ethan",lastName:"Wilson",email:"ethan.wilson@example.com",totalGiving:1500,lastGiftAt:new Date("2025-05-30")}],c=[];for(let e of m)try{let t=await a.donor.upsert({where:{email:e.email},update:{},create:{firstName:e.firstName,lastName:e.lastName,email:e.email,totalGiving:e.totalGiving||0,lastGiftAt:e.lastGiftAt||null}});c.push(t)}catch(a){console.warn("Failed to upsert extra donor",e.email,a)}let p=await l.default.hash("password123",10);await a.user.upsert({where:{email:"rob.admin@example.com"},update:{},create:{name:"Rob Admin",email:"rob.admin@example.com",password:p,role:"ADMIN"}}),await a.user.upsert({where:{email:"nick.team@example.com"},update:{},create:{name:"Nick Thompson",email:"nick.team@example.com",password:p,role:"TEAM_MEMBER"}}),await a.user.upsert({where:{email:"matt.team@example.com"},update:{},create:{name:"Matt Lane",email:"matt.team@example.com",password:p,role:"TEAM_MEMBER"}});let u=await a.donation.count();0===u?await a.donation.createMany({data:[{donorId:d.id,amount:7500,campaignId:n.id,date:new Date("2025-03-03"),method:"GIFT"},{donorId:d.id,amount:5e3,campaignId:n.id,date:new Date("2025-02-20"),method:"CARD"},{donorId:d.id,amount:2500,campaignId:n.id,date:new Date("2025-03-10"),method:"CARD"},{donorId:d.id,amount:4e4,campaignId:r.id,date:new Date("2025-12-01"),method:"CARD"},{donorId:s.id,amount:200,campaignId:o.id,date:new Date("2025-01-12"),method:"GIFT"},{donorId:s.id,amount:4e3,campaignId:o.id,date:new Date("2024-12-18"),method:"CHECK"},{donorId:c[0]?.id,amount:1200,campaignId:n.id,date:new Date("2025-11-01"),method:"CARD"},{donorId:c[1]?.id,amount:500,campaignId:o.id,date:new Date("2025-09-18"),method:"CARD"},{donorId:c[2]?.id,amount:300,campaignId:o.id,date:new Date("2025-08-10"),method:"CHECK"},{donorId:c[4]?.id,amount:750,campaignId:n.id,date:new Date("2025-07-04"),method:"CARD"},{donorId:c[5]?.id,amount:2500,campaignId:n.id,date:new Date("2025-06-21"),method:"CARD"},{donorId:c[7]?.id,amount:1500,campaignId:o.id,date:new Date("2025-05-30"),method:"CARD"}],skipDuplicates:!0}):console.log("Seed: donations already exist (count="+u+"), skipping donation creation to avoid duplicates");try{for(let t of i){let i=e[t];if(!i)continue;let n=await a.donation.count({where:{campaignId:i.id}});if(0===(n||0)){let e=d||c[0];if(e)try{await a.donation.create({data:{donorId:e.id,amount:5e3,campaignId:i.id,date:new Date,method:"CARD"}}),console.log("Seed: created sample donation for approved campaign",t)}catch(e){console.warn("Seed: failed to create sample donation for",t,e)}}}}catch(e){console.warn("Seed: error ensuring donations for approved campaigns",e)}try{if(r&&r.id&&!await a.donation.findFirst({where:{campaignId:r.id,method:"SEED-BOOST"}})){let e=d||c[0];if(e)try{await a.donation.create({data:{donorId:e.id,amount:4e4,campaignId:r.id,date:new Date("2025-12-01"),method:"SEED-BOOST"}}),console.log("Seed: created boost donation for Holiday Giving Drive 2025")}catch(e){console.warn("Seed: failed to create boost donation",e)}}}catch(e){console.warn("Seed: boost donation check failed",e)}try{let e=await a.donation.aggregate({where:{donorId:d.id},_sum:{amount:!0},_max:{date:!0}}),t=await a.donation.aggregate({where:{donorId:s.id},_sum:{amount:!0},_max:{date:!0}}),i=e._sum.amount||0,n=e._max.date||null,o=t._sum.amount||0,r=t._max.date||null;await a.donor.update({where:{id:d.id},data:{totalGiving:i,lastGiftAt:n}}),await a.donor.update({where:{id:s.id},data:{totalGiving:o,lastGiftAt:r}})}catch(e){console.warn("Failed to update donor aggregates after seeding",e)}let g=await a.donor.count(),h=(await a.donation.findMany()).reduce((e,a)=>e+(Number(a.amount||0)||0),0),w=await a.campaign.findMany({include:{donations:!0}}),f=w.map(e=>{let a=e.donations.reduce((e,a)=>e+(Number(a.amount||0)||0),0),t=e.donations.filter(e=>{try{let a=String(e.method||"").toLowerCase(),t=String(e.notes||"").toLowerCase();return/gift/.test(a)||/gift/.test(t)}catch(e){return!1}}).reduce((e,a)=>e+(Number(a.amount||0)||0),0);return{id:e.id,name:e.name,goal:e.goal,raised:a,gifted:t}}),v=(await a.donor.findMany({include:{donations:!0}})).map(e=>({id:e.id,name:`${e.firstName} ${e.lastName||""}`.trim(),email:e.email,totalGiving:e.donations.reduce((e,a)=>e+(Number(a.amount||0)||0),0),giftedTotal:e.donations.filter(e=>{try{let a=String(e.method||"").toLowerCase(),t=String(e.notes||"").toLowerCase();return/gift/.test(a)||/gift/.test(t)}catch(e){return!1}}).reduce((e,a)=>e+(Number(a.amount||0)||0),0),gifts:e.donations.length,lastGiftAt:e.lastGiftAt})),D=[{title:"Total Partners",value:"4",sub:"2 active"},{title:"Active Programs",value:String(f&&f.length||0),sub:"Running programs"},{title:"Total Revenue",value:"$"+(h&&h.toLocaleString?h.toLocaleString():String(h||0)),sub:"From all programs"},{title:"Total Donors",value:String(g||0),sub:"Individuals who gave"},{title:"Team Reminders",value:"0",sub:"Action items pending"}],y=(w||[]).slice(0,3).map((e,a)=>({id:`f${a+1}`,campaign:{id:e.id,name:e.name},days:(a+1)*30})).map((e,a)=>{let t=[{name:"Nick Thompson",role:"Field Lead",email:"nick.team@example.com"},{name:"Matt Lane",role:"Activation Support",email:"matt.team@example.com"}];return{id:e.id,campaign:e.campaign,days:e.days,assignedRole:0===a?"Campaign Lead":"Support",support:0===a?[t[0],t[1]]:[t[1]],note:0===a?"Oversee campaign deliverables and coordinate sponsors":"Support activation and logistics"}}),S={metrics:D,partners:[{name:"GameStop",tag:"At Risk",health:"45%",owners:["nick.team@example.com"],description:"Retail partner with e-commerce and in-store activations",contractValue:"$120,000",startDate:"2024-03-01",endDate:"2024-12-31",lastContact:"2025-11-01",contacts:[{name:"Jordan Lee",title:"Sponsorship Lead",email:"jordan.lee@gamestop.com",phone:"555-0102"}],interactions:[{id:"i1",type:"Email",date:"2025-11-01",note:"Left proposal for holiday event"},{id:"i1b",type:"Call",date:"2025-12-05",note:"Discussed in-store activation logistics for holiday weekend"}],programs:[],reminders:[{id:"r-gs-1",title:"Holiday activation follow-up",due:"2025-12-10",note:"Confirm in-store setup and co-marketing materials"}]},{name:"Discord",tag:"Pending",health:"70%",owners:["nick.team@example.com","matt.team@example.com"],description:"Community platform partner – integration and co-streaming opportunities",contractValue:"$75,000",startDate:"2024-06-01",endDate:"2025-06-01",lastContact:"2025-11-28",contacts:[{name:"Ava Reed",title:"Partnerships",email:"ava.reed@discord.com",phone:"555-0199"}],interactions:[{id:"i2",type:"Call",date:"2025-11-28",note:"Sent proposal draft"},{id:"i2b",type:"Email",date:"2025-12-02",note:"Requested technical integration specs"}],programs:[],reminders:[{id:"r-dis-1",title:"Integration specs follow-up",due:"2025-12-08",note:"Confirm API access and streaming integration windows"}]},{name:"Alienware",tag:"Active",health:"85%",owners:["nick.team@example.com"],description:"Hardware sponsor for local venues and events",contractValue:"$250,000",startDate:"2024-02-01",endDate:"2025-02-01",lastContact:"2025-12-07",contacts:[{name:"Sam Patel",title:"Regional Account Manager",email:"sam.patel@alienware.com",phone:"555-0144"}],interactions:[{id:"i3",type:"Email",date:"2025-12-07",note:"Equipment delivery confirmed for new venue opening."},{id:"i3b",type:"Call",date:"2025-08-20",note:"Checked installation schedule and on-site support"}],programs:[],reminders:[{id:"r-al-1",title:"Post-installation check-in",due:"2025-12-14",note:"Verify final setup and collect feedback from venue team"}]},{name:"Red Bull Gaming",tag:"Active",health:"92%",owners:["matt.team@example.com"],description:"Major sponsor for tournament series and venue branding",contractValue:"$500,000",startDate:"2024-01-14",endDate:"2025-01-13",lastContact:"2024-12-04",contacts:[{name:"Sarah Martinez",title:"Esports Partnership Manager",email:"sarah.martinez@redbull.com",phone:"555-0123"}],interactions:[{id:"i4",type:"Meeting",date:"2024-12-04",note:"Discussed Q1 2025 tournament schedule and activation opportunities."},{id:"i5",type:"Email",date:"2025-01-10",note:"Sent post-event metrics and initial renewal proposal."},{id:"i6",type:"Call",date:"2025-06-15",note:"Follow-up call to review renewal options and expanded activation."}],programs:[{id:"p1",title:"Red Bull Tournament Series 2024",status:"Active",value:"$500,000",start:"2024-01-14",end:"2025-01-13"}],reminders:[{id:"r1",title:"Contract Renewal",due:"2025-12-14",note:"Reach out to discuss 2025 renewal terms and potential expansion"}],lastContact:"2025-06-15"}],donors:[{name:`${d.firstName} ${d.lastName}`,totalGiving:"$12,500",lastGift:"Mar 3, 2025"},{name:`${s.firstName} ${s.lastName}`,totalGiving:"$4,200",lastGift:"Jan 12, 2025"}],campaigns:[{title:n.name,goal:"$75,000",raised:"$12,000"},{title:o.name,goal:"$20,000",raised:"$5,000"}],recentActivity:[{title:"Alienware",kind:"Email",note:"Equipment delivery confirmed for new venue opening.",date:"Dec 7, 2025"},{title:"Red Bull Gaming",kind:"Meeting",note:"Discussed Q1 2025 tournament schedule and activation opportunities.",date:"Dec 4, 2025"}],alerts:[{title:"Alienware",note:"Send co-marketing proposal and content calendar — Due: Dec 14, 2025"},{title:"Red Bull Gaming",note:"Reach out to discuss 2025 renewal terms — Due: Dec 19, 2025"}],tasks:[{id:"t1",title:"Follow up with Alienware",due:"2025-12-14",note:"Send co-marketing proposal and content calendar"},{id:"t2",title:"Reach out to Red Bull Gaming",due:"2025-12-19",note:"Discuss 2025 renewal terms"}],followUps:y,analytics:{totalDonors:g,totalRevenue:h,campaignStats:f,donorStats:v}};return t.status(200).json(S)}catch(a){console.error("Seed API error",a);let e=a&&a.stack?a.stack:a&&a.message?a.message:String(a);return t.status(500).json({error:"Seed failed",details:e})}finally{try{await a.$disconnect()}catch(e){}}}e.g.__prisma||(e.g.__prisma=new r.PrismaClient),a=e.g.__prisma,e.s(["default",()=>d],7165);var s=e.i(7165),m=e.i(7031),c=e.i(81927),p=e.i(46432);let u=(0,o.hoist)(s,"default"),g=(0,o.hoist)(s,"config"),h=new n.PagesAPIRouteModule({definition:{kind:i.RouteKind.PAGES_API,page:"/api/seed",pathname:"/api/seed",bundlePath:"",filename:""},userland:s,distDir:".next",relativeProjectDir:""});async function w(e,a,i){h.isDev&&(0,p.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let n="/api/seed";n=n.replace(/\/index$/,"")||"/";let o=await h.prepare(e,a,{srcPage:n});if(!o){a.statusCode=400,a.end("Bad Request"),null==i.waitUntil||i.waitUntil.call(i,Promise.resolve());return}let{query:r,params:l,prerenderManifest:d,routerServerContext:s}=o;try{let t=e.method||"GET",i=(0,m.getTracer)(),o=i.getActiveScopeSpan(),p=h.instrumentationOnRequestError.bind(h),u=async o=>h.render(e,a,{query:{...r,...l},params:l,allowedRevalidateHeaderKeys:[],multiZoneDraftMode:!1,trustHostHeader:!1,previewProps:d.preview,propagateError:!1,dev:h.isDev,page:"/api/seed",internalRevalidate:null==s?void 0:s.revalidate,onError:(...a)=>p(e,...a)}).finally(()=>{if(!o)return;o.setAttributes({"http.status_code":a.statusCode,"next.rsc":!1});let e=i.getRootSpanAttributes();if(!e)return;if(e.get("next.span_type")!==c.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${e.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let r=e.get("next.route");if(r){let e=`${t} ${r}`;o.setAttributes({"next.route":r,"http.route":r,"next.span_name":e}),o.updateName(e)}else o.updateName(`${t} ${n}`)});o?await u(o):await i.withPropagatedContext(e.headers,()=>i.trace(c.BaseServerSpan.handleRequest,{spanName:`${t} ${n}`,kind:m.SpanKind.SERVER,attributes:{"http.method":t,"http.target":e.url}},u))}catch(e){if(h.isDev)throw e;(0,t.sendError)(a,500,"Internal Server Error")}finally{null==i.waitUntil||i.waitUntil.call(i,Promise.resolve())}}e.s(["config",0,g,"default",0,u,"handler",()=>w],29480)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__bb36ff83._.js.map